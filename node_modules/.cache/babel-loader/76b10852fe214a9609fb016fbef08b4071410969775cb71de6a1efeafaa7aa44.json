{"ast":null,"code":"function getStringWidth(text, styles, doc) {\n  doc.applyStyles(styles, true);\n  var textArr = Array.isArray(text) ? text : [text];\n  var widestLineWidth = textArr.map(function (text) {\n    return doc.getTextWidth(text);\n  }).reduce(function (a, b) {\n    return Math.max(a, b);\n  }, 0);\n  return widestLineWidth;\n}\nfunction addTableBorder(doc, table, startPos, cursor) {\n  var lineWidth = table.settings.tableLineWidth;\n  var lineColor = table.settings.tableLineColor;\n  doc.applyStyles({\n    lineWidth: lineWidth,\n    lineColor: lineColor\n  });\n  var fillStyle = getFillStyle(lineWidth, false);\n  if (fillStyle) {\n    doc.rect(startPos.x, startPos.y, table.getWidth(doc.pageSize().width), cursor.y - startPos.y, fillStyle);\n  }\n}\nfunction getFillStyle(lineWidth, fillColor) {\n  var drawLine = lineWidth > 0;\n  var drawBackground = fillColor || fillColor === 0;\n  if (drawLine && drawBackground) {\n    return 'DF'; // Fill then stroke\n  } else if (drawLine) {\n    return 'S'; // Only stroke (transparent background)\n  } else if (drawBackground) {\n    return 'F'; // Only fill, no stroke\n  } else {\n    return null;\n  }\n}\nfunction parseSpacing(value, defaultValue) {\n  var _a, _b, _c, _d;\n  value = value || defaultValue;\n  if (Array.isArray(value)) {\n    if (value.length >= 4) {\n      return {\n        top: value[0],\n        right: value[1],\n        bottom: value[2],\n        left: value[3]\n      };\n    } else if (value.length === 3) {\n      return {\n        top: value[0],\n        right: value[1],\n        bottom: value[2],\n        left: value[1]\n      };\n    } else if (value.length === 2) {\n      return {\n        top: value[0],\n        right: value[1],\n        bottom: value[0],\n        left: value[1]\n      };\n    } else if (value.length === 1) {\n      value = value[0];\n    } else {\n      value = defaultValue;\n    }\n  }\n  if (typeof value === 'object') {\n    if (typeof value.vertical === 'number') {\n      value.top = value.vertical;\n      value.bottom = value.vertical;\n    }\n    if (typeof value.horizontal === 'number') {\n      value.right = value.horizontal;\n      value.left = value.horizontal;\n    }\n    return {\n      left: (_a = value.left) !== null && _a !== void 0 ? _a : defaultValue,\n      top: (_b = value.top) !== null && _b !== void 0 ? _b : defaultValue,\n      right: (_c = value.right) !== null && _c !== void 0 ? _c : defaultValue,\n      bottom: (_d = value.bottom) !== null && _d !== void 0 ? _d : defaultValue\n    };\n  }\n  if (typeof value !== 'number') {\n    value = defaultValue;\n  }\n  return {\n    top: value,\n    right: value,\n    bottom: value,\n    left: value\n  };\n}\n\n// Limitations\nfunction parseCss(supportedFonts, element, scaleFactor, style, window) {\n  var result = {};\n  var pxScaleFactor = 96 / 72;\n  var backgroundColor = parseColor(element, function (elem) {\n    return window.getComputedStyle(elem)['backgroundColor'];\n  });\n  if (backgroundColor != null) result.fillColor = backgroundColor;\n  var textColor = parseColor(element, function (elem) {\n    return window.getComputedStyle(elem)['color'];\n  });\n  if (textColor != null) result.textColor = textColor;\n  var borderColor = parseColor(element, function (elem) {\n    return window.getComputedStyle(elem)['borderTopColor'];\n  });\n  if (borderColor != null) result.lineColor = borderColor;\n  var padding = parsePadding(style, scaleFactor);\n  if (padding) result.cellPadding = padding;\n  // style.borderWidth only works in chrome (borderTopWidth etc works in firefox and ie as well)\n  var bw = parseInt(style.borderTopWidth || '');\n  bw = bw / pxScaleFactor / scaleFactor;\n  if (bw) result.lineWidth = bw;\n  var accepted = ['left', 'right', 'center', 'justify'];\n  if (accepted.indexOf(style.textAlign) !== -1) {\n    result.halign = style.textAlign;\n  }\n  accepted = ['middle', 'bottom', 'top'];\n  if (accepted.indexOf(style.verticalAlign) !== -1) {\n    result.valign = style.verticalAlign;\n  }\n  var res = parseInt(style.fontSize || '');\n  if (!isNaN(res)) result.fontSize = res / pxScaleFactor;\n  var fontStyle = parseFontStyle(style);\n  if (fontStyle) result.fontStyle = fontStyle;\n  var font = (style.fontFamily || '').toLowerCase();\n  if (supportedFonts.indexOf(font) !== -1) {\n    result.font = font;\n  }\n  return result;\n}\nfunction parseFontStyle(style) {\n  var res = '';\n  if (style.fontWeight === 'bold' || style.fontWeight === 'bolder' || parseInt(style.fontWeight) >= 700) {\n    res = 'bold';\n  }\n  if (style.fontStyle === 'italic' || style.fontStyle === 'oblique') {\n    res += 'italic';\n  }\n  return res;\n}\nfunction parseColor(element, styleGetter) {\n  var cssColor = realColor(element, styleGetter);\n  if (!cssColor) return null;\n  var rgba = cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d*\\.?\\d*))?\\)$/);\n  if (!rgba || !Array.isArray(rgba)) {\n    return null;\n  }\n  var color = [parseInt(rgba[1]), parseInt(rgba[2]), parseInt(rgba[3])];\n  var alpha = parseInt(rgba[4]);\n  if (alpha === 0 || isNaN(color[0]) || isNaN(color[1]) || isNaN(color[2])) {\n    return null;\n  }\n  return color;\n}\nfunction realColor(elem, styleGetter) {\n  var bg = styleGetter(elem);\n  if (bg === 'rgba(0, 0, 0, 0)' || bg === 'transparent' || bg === 'initial' || bg === 'inherit') {\n    if (elem.parentElement == null) {\n      return null;\n    }\n    return realColor(elem.parentElement, styleGetter);\n  } else {\n    return bg;\n  }\n}\nfunction parsePadding(style, scaleFactor) {\n  var val = [style.paddingTop, style.paddingRight, style.paddingBottom, style.paddingLeft];\n  var pxScaleFactor = 96 / (72 / scaleFactor);\n  var linePadding = (parseInt(style.lineHeight) - parseInt(style.fontSize)) / scaleFactor / 2;\n  var inputPadding = val.map(function (n) {\n    return parseInt(n || '0') / pxScaleFactor;\n  });\n  var padding = parseSpacing(inputPadding, 0);\n  if (linePadding > padding.top) {\n    padding.top = linePadding;\n  }\n  if (linePadding > padding.bottom) {\n    padding.bottom = linePadding;\n  }\n  return padding;\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/**\n * Ratio between font size and font height. The number comes from jspdf's source code\n */\nvar FONT_ROW_RATIO = 1.15;\nvar HtmlRowInput = /** @class */function (_super) {\n  __extends(HtmlRowInput, _super);\n  function HtmlRowInput(element) {\n    var _this = _super.call(this) || this;\n    _this._element = element;\n    return _this;\n  }\n  return HtmlRowInput;\n}(Array);\n// Base style for all themes\nfunction defaultStyles(scaleFactor) {\n  return {\n    font: 'helvetica',\n    fontStyle: 'normal',\n    overflow: 'linebreak',\n    fillColor: false,\n    textColor: 20,\n    halign: 'left',\n    valign: 'top',\n    fontSize: 10,\n    cellPadding: 5 / scaleFactor,\n    lineColor: 200,\n    lineWidth: 0,\n    cellWidth: 'auto',\n    minCellHeight: 0,\n    minCellWidth: 0\n  };\n}\nfunction getTheme(name) {\n  var themes = {\n    striped: {\n      table: {\n        fillColor: 255,\n        textColor: 80,\n        fontStyle: 'normal'\n      },\n      head: {\n        textColor: 255,\n        fillColor: [41, 128, 185],\n        fontStyle: 'bold'\n      },\n      body: {},\n      foot: {\n        textColor: 255,\n        fillColor: [41, 128, 185],\n        fontStyle: 'bold'\n      },\n      alternateRow: {\n        fillColor: 245\n      }\n    },\n    grid: {\n      table: {\n        fillColor: 255,\n        textColor: 80,\n        fontStyle: 'normal',\n        lineWidth: 0.1\n      },\n      head: {\n        textColor: 255,\n        fillColor: [26, 188, 156],\n        fontStyle: 'bold',\n        lineWidth: 0\n      },\n      body: {},\n      foot: {\n        textColor: 255,\n        fillColor: [26, 188, 156],\n        fontStyle: 'bold',\n        lineWidth: 0\n      },\n      alternateRow: {}\n    },\n    plain: {\n      head: {\n        fontStyle: 'bold'\n      },\n      foot: {\n        fontStyle: 'bold'\n      }\n    }\n  };\n  return themes[name];\n}\nfunction parseHtml(doc, input, window, includeHiddenHtml, useCss) {\n  var _a, _b;\n  if (includeHiddenHtml === void 0) {\n    includeHiddenHtml = false;\n  }\n  if (useCss === void 0) {\n    useCss = false;\n  }\n  var tableElement;\n  if (typeof input === 'string') {\n    tableElement = window.document.querySelector(input);\n  } else {\n    tableElement = input;\n  }\n  var supportedFonts = Object.keys(doc.getFontList());\n  var scaleFactor = doc.scaleFactor();\n  var head = [],\n    body = [],\n    foot = [];\n  if (!tableElement) {\n    console.error('Html table could not be found with input: ', input);\n    return {\n      head: head,\n      body: body,\n      foot: foot\n    };\n  }\n  for (var i = 0; i < tableElement.rows.length; i++) {\n    var element = tableElement.rows[i];\n    var tagName = (_b = (_a = element === null || element === void 0 ? void 0 : element.parentElement) === null || _a === void 0 ? void 0 : _a.tagName) === null || _b === void 0 ? void 0 : _b.toLowerCase();\n    var row = parseRowContent(supportedFonts, scaleFactor, window, element, includeHiddenHtml, useCss);\n    if (!row) continue;\n    if (tagName === 'thead') {\n      head.push(row);\n    } else if (tagName === 'tfoot') {\n      foot.push(row);\n    } else {\n      // Add to body both if parent is tbody or table\n      body.push(row);\n    }\n  }\n  return {\n    head: head,\n    body: body,\n    foot: foot\n  };\n}\nfunction parseRowContent(supportedFonts, scaleFactor, window, row, includeHidden, useCss) {\n  var resultRow = new HtmlRowInput(row);\n  for (var i = 0; i < row.cells.length; i++) {\n    var cell = row.cells[i];\n    var style_1 = window.getComputedStyle(cell);\n    if (includeHidden || style_1.display !== 'none') {\n      var cellStyles = void 0;\n      if (useCss) {\n        cellStyles = parseCss(supportedFonts, cell, scaleFactor, style_1, window);\n      }\n      resultRow.push({\n        rowSpan: cell.rowSpan,\n        colSpan: cell.colSpan,\n        styles: cellStyles,\n        _element: cell,\n        content: parseCellContent(cell)\n      });\n    }\n  }\n  var style = window.getComputedStyle(row);\n  if (resultRow.length > 0 && (includeHidden || style.display !== 'none')) {\n    return resultRow;\n  }\n}\nfunction parseCellContent(orgCell) {\n  // Work on cloned node to make sure no changes are applied to html table\n  var cell = orgCell.cloneNode(true);\n  // Remove extra space and line breaks in markup to make it more similar to\n  // what would be shown in html\n  cell.innerHTML = cell.innerHTML.replace(/\\n/g, '').replace(/ +/g, ' ');\n  // Preserve <br> tags as line breaks in the pdf\n  cell.innerHTML = cell.innerHTML.split(/\\<br.*?\\>/) //start with '<br' and ends with '>'.\n  .map(function (part) {\n    return part.trim();\n  }).join('\\n');\n  // innerText for ie\n  return cell.innerText || cell.textContent || '';\n}\n\n/**\n * Improved text function with halign and valign support\n * Inspiration from: http://stackoverflow.com/questions/28327510/align-text-right-using-jspdf/28433113#28433113\n */\nfunction autoTableText(text, x, y, styles, doc) {\n  styles = styles || {};\n  var FONT_ROW_RATIO = 1.15;\n  var k = doc.internal.scaleFactor;\n  var fontSize = doc.internal.getFontSize() / k;\n  var splitRegex = /\\r\\n|\\r|\\n/g;\n  var splitText = '';\n  var lineCount = 1;\n  if (styles.valign === 'middle' || styles.valign === 'bottom' || styles.halign === 'center' || styles.halign === 'right') {\n    splitText = typeof text === 'string' ? text.split(splitRegex) : text;\n    lineCount = splitText.length || 1;\n  }\n  // Align the top\n  y += fontSize * (2 - FONT_ROW_RATIO);\n  if (styles.valign === 'middle') y -= lineCount / 2 * fontSize * FONT_ROW_RATIO;else if (styles.valign === 'bottom') y -= lineCount * fontSize * FONT_ROW_RATIO;\n  if (styles.halign === 'center' || styles.halign === 'right') {\n    var alignSize = fontSize;\n    if (styles.halign === 'center') alignSize *= 0.5;\n    if (splitText && lineCount >= 1) {\n      for (var iLine = 0; iLine < splitText.length; iLine++) {\n        doc.text(splitText[iLine], x - doc.getStringUnitWidth(splitText[iLine]) * alignSize, y);\n        y += fontSize * FONT_ROW_RATIO;\n      }\n      return doc;\n    }\n    x -= doc.getStringUnitWidth(text) * alignSize;\n  }\n  if (styles.halign === 'justify') {\n    doc.text(text, x, y, {\n      maxWidth: styles.maxWidth || 100,\n      align: 'justify'\n    });\n  } else {\n    doc.text(text, x, y);\n  }\n  return doc;\n}\nvar globalDefaults = {};\nvar DocHandler = /** @class */function () {\n  function DocHandler(jsPDFDocument) {\n    this.jsPDFDocument = jsPDFDocument;\n    this.userStyles = {\n      // Black for versions of jspdf without getTextColor\n      textColor: jsPDFDocument.getTextColor ? this.jsPDFDocument.getTextColor() : 0,\n      fontSize: jsPDFDocument.internal.getFontSize(),\n      fontStyle: jsPDFDocument.internal.getFont().fontStyle,\n      font: jsPDFDocument.internal.getFont().fontName,\n      // 0 for versions of jspdf without getLineWidth\n      lineWidth: jsPDFDocument.getLineWidth ? this.jsPDFDocument.getLineWidth() : 0,\n      // Black for versions of jspdf without getDrawColor\n      lineColor: jsPDFDocument.getDrawColor ? this.jsPDFDocument.getDrawColor() : 0\n    };\n  }\n  DocHandler.setDefaults = function (defaults, doc) {\n    if (doc === void 0) {\n      doc = null;\n    }\n    if (doc) {\n      doc.__autoTableDocumentDefaults = defaults;\n    } else {\n      globalDefaults = defaults;\n    }\n  };\n  DocHandler.unifyColor = function (c) {\n    if (Array.isArray(c)) {\n      return c;\n    } else if (typeof c === 'number') {\n      return [c, c, c];\n    } else if (typeof c === 'string') {\n      return [c];\n    } else {\n      return null;\n    }\n  };\n  DocHandler.prototype.applyStyles = function (styles, fontOnly) {\n    // Font style needs to be applied before font\n    // https://github.com/simonbengtsson/jsPDF-AutoTable/issues/632\n    var _a, _b, _c;\n    if (fontOnly === void 0) {\n      fontOnly = false;\n    }\n    if (styles.fontStyle) this.jsPDFDocument.setFontStyle && this.jsPDFDocument.setFontStyle(styles.fontStyle);\n    var _d = this.jsPDFDocument.internal.getFont(),\n      fontStyle = _d.fontStyle,\n      fontName = _d.fontName;\n    if (styles.font) fontName = styles.font;\n    if (styles.fontStyle) {\n      fontStyle = styles.fontStyle;\n      var availableFontStyles = this.getFontList()[fontName];\n      if (availableFontStyles && availableFontStyles.indexOf(fontStyle) === -1) {\n        // Common issue was that the default bold in headers\n        // made custom fonts not work. For example:\n        // https://github.com/simonbengtsson/jsPDF-AutoTable/issues/653\n        this.jsPDFDocument.setFontStyle && this.jsPDFDocument.setFontStyle(availableFontStyles[0]);\n        fontStyle = availableFontStyles[0];\n      }\n    }\n    this.jsPDFDocument.setFont(fontName, fontStyle);\n    if (styles.fontSize) this.jsPDFDocument.setFontSize(styles.fontSize);\n    if (fontOnly) {\n      return; // Performance improvement\n    }\n    var color = DocHandler.unifyColor(styles.fillColor);\n    if (color) (_a = this.jsPDFDocument).setFillColor.apply(_a, color);\n    color = DocHandler.unifyColor(styles.textColor);\n    if (color) (_b = this.jsPDFDocument).setTextColor.apply(_b, color);\n    color = DocHandler.unifyColor(styles.lineColor);\n    if (color) (_c = this.jsPDFDocument).setDrawColor.apply(_c, color);\n    if (typeof styles.lineWidth === 'number') {\n      this.jsPDFDocument.setLineWidth(styles.lineWidth);\n    }\n  };\n  DocHandler.prototype.splitTextToSize = function (text, size, opts) {\n    return this.jsPDFDocument.splitTextToSize(text, size, opts);\n  };\n  DocHandler.prototype.rect = function (x, y, width, height, fillStyle) {\n    return this.jsPDFDocument.rect(x, y, width, height, fillStyle);\n  };\n  DocHandler.prototype.getLastAutoTable = function () {\n    return this.jsPDFDocument.lastAutoTable || null;\n  };\n  DocHandler.prototype.getTextWidth = function (text) {\n    return this.jsPDFDocument.getTextWidth(text);\n  };\n  DocHandler.prototype.getDocument = function () {\n    return this.jsPDFDocument;\n  };\n  DocHandler.prototype.setPage = function (page) {\n    this.jsPDFDocument.setPage(page);\n  };\n  DocHandler.prototype.addPage = function () {\n    return this.jsPDFDocument.addPage();\n  };\n  DocHandler.prototype.getFontList = function () {\n    return this.jsPDFDocument.getFontList();\n  };\n  DocHandler.prototype.getGlobalOptions = function () {\n    return globalDefaults || {};\n  };\n  DocHandler.prototype.getDocumentOptions = function () {\n    return this.jsPDFDocument.__autoTableDocumentDefaults || {};\n  };\n  DocHandler.prototype.pageSize = function () {\n    var pageSize = this.jsPDFDocument.internal.pageSize;\n    // JSPDF 1.4 uses get functions instead of properties on pageSize\n    if (pageSize.width == null) {\n      pageSize = {\n        width: pageSize.getWidth(),\n        height: pageSize.getHeight()\n      };\n    }\n    return pageSize;\n  };\n  DocHandler.prototype.scaleFactor = function () {\n    return this.jsPDFDocument.internal.scaleFactor;\n  };\n  DocHandler.prototype.pageNumber = function () {\n    var pageInfo = this.jsPDFDocument.internal.getCurrentPageInfo();\n    if (!pageInfo) {\n      // Only recent versions of jspdf has pageInfo\n      return this.jsPDFDocument.internal.getNumberOfPages();\n    }\n    return pageInfo.pageNumber;\n  };\n  return DocHandler;\n}();\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nfunction assign(target, s, s1, s2, s3) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n  var to = Object(target);\n  for (var index = 1; index < arguments.length; index++) {\n    // eslint-disable-next-line prefer-rest-params\n    var nextSource = arguments[index];\n    if (nextSource != null) {\n      // Skip over if undefined or null\n      for (var nextKey in nextSource) {\n        // Avoid bugs when hasOwnProperty is shadowed\n        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n          to[nextKey] = nextSource[nextKey];\n        }\n      }\n    }\n  }\n  return to;\n}\nfunction validateOptions(doc, global, document, current) {\n  var _loop_1 = function (options) {\n    if (options && typeof options !== 'object') {\n      console.error('The options parameter should be of type object, is: ' + typeof options);\n    }\n    if (typeof options.extendWidth !== 'undefined') {\n      options.tableWidth = options.extendWidth ? 'auto' : 'wrap';\n      console.error('Use of deprecated option: extendWidth, use tableWidth instead.');\n    }\n    if (typeof options.margins !== 'undefined') {\n      if (typeof options.margin === 'undefined') options.margin = options.margins;\n      console.error('Use of deprecated option: margins, use margin instead.');\n    }\n    if (options.startY && typeof options.startY !== 'number') {\n      console.error('Invalid value for startY option', options.startY);\n      delete options.startY;\n    }\n    if (!options.didDrawPage && (options.afterPageContent || options.beforePageContent || options.afterPageAdd)) {\n      console.error('The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead');\n      options.didDrawPage = function (data) {\n        doc.applyStyles(doc.userStyles);\n        if (options.beforePageContent) options.beforePageContent(data);\n        doc.applyStyles(doc.userStyles);\n        if (options.afterPageContent) options.afterPageContent(data);\n        doc.applyStyles(doc.userStyles);\n        if (options.afterPageAdd && data.pageNumber > 1) {\n          data.afterPageAdd(data);\n        }\n        doc.applyStyles(doc.userStyles);\n      };\n    }\n    ['createdHeaderCell', 'drawHeaderRow', 'drawRow', 'drawHeaderCell'].forEach(function (name) {\n      if (options[name]) {\n        console.error(\"The \\\"\".concat(name, \"\\\" hook has changed in version 3.0, check the changelog for how to migrate.\"));\n      }\n    });\n    [['showFoot', 'showFooter'], ['showHead', 'showHeader'], ['didDrawPage', 'addPageContent'], ['didParseCell', 'createdCell'], ['headStyles', 'headerStyles']].forEach(function (_a) {\n      var current = _a[0],\n        deprecated = _a[1];\n      if (options[deprecated]) {\n        console.error(\"Use of deprecated option \".concat(deprecated, \". Use \").concat(current, \" instead\"));\n        options[current] = options[deprecated];\n      }\n    });\n    [['padding', 'cellPadding'], ['lineHeight', 'rowHeight'], 'fontSize', 'overflow'].forEach(function (o) {\n      var deprecatedOption = typeof o === 'string' ? o : o[0];\n      var style = typeof o === 'string' ? o : o[1];\n      if (typeof options[deprecatedOption] !== 'undefined') {\n        if (typeof options.styles[style] === 'undefined') {\n          options.styles[style] = options[deprecatedOption];\n        }\n        console.error('Use of deprecated option: ' + deprecatedOption + ', use the style ' + style + ' instead.');\n      }\n    });\n    for (var _b = 0, _c = ['styles', 'bodyStyles', 'headStyles', 'footStyles']; _b < _c.length; _b++) {\n      var styleProp = _c[_b];\n      checkStyles(options[styleProp] || {});\n    }\n    var columnStyles = options['columnStyles'] || {};\n    for (var _d = 0, _e = Object.keys(columnStyles); _d < _e.length; _d++) {\n      var key = _e[_d];\n      checkStyles(columnStyles[key] || {});\n    }\n  };\n  for (var _i = 0, _a = [global, document, current]; _i < _a.length; _i++) {\n    var options = _a[_i];\n    _loop_1(options);\n  }\n}\nfunction checkStyles(styles) {\n  if (styles.rowHeight) {\n    console.error('Use of deprecated style rowHeight. It is renamed to minCellHeight.');\n    if (!styles.minCellHeight) {\n      styles.minCellHeight = styles.rowHeight;\n    }\n  } else if (styles.columnWidth) {\n    console.error('Use of deprecated style columnWidth. It is renamed to cellWidth.');\n    if (!styles.cellWidth) {\n      styles.cellWidth = styles.columnWidth;\n    }\n  }\n}\nfunction parseInput(d, current) {\n  var doc = new DocHandler(d);\n  var document = doc.getDocumentOptions();\n  var global = doc.getGlobalOptions();\n  validateOptions(doc, global, document, current);\n  var options = assign({}, global, document, current);\n  var win;\n  if (typeof window !== 'undefined') {\n    win = window;\n  }\n  var styles = parseStyles(global, document, current);\n  var hooks = parseHooks(global, document, current);\n  var settings = parseSettings(doc, options);\n  var content = parseContent$1(doc, options, win);\n  return {\n    id: current.tableId,\n    content: content,\n    hooks: hooks,\n    styles: styles,\n    settings: settings\n  };\n}\nfunction parseStyles(gInput, dInput, cInput) {\n  var styleOptions = {\n    styles: {},\n    headStyles: {},\n    bodyStyles: {},\n    footStyles: {},\n    alternateRowStyles: {},\n    columnStyles: {}\n  };\n  var _loop_1 = function (prop) {\n    if (prop === 'columnStyles') {\n      var global_1 = gInput[prop];\n      var document_1 = dInput[prop];\n      var current = cInput[prop];\n      styleOptions.columnStyles = assign({}, global_1, document_1, current);\n    } else {\n      var allOptions = [gInput, dInput, cInput];\n      var styles = allOptions.map(function (opts) {\n        return opts[prop] || {};\n      });\n      styleOptions[prop] = assign({}, styles[0], styles[1], styles[2]);\n    }\n  };\n  for (var _i = 0, _a = Object.keys(styleOptions); _i < _a.length; _i++) {\n    var prop = _a[_i];\n    _loop_1(prop);\n  }\n  return styleOptions;\n}\nfunction parseHooks(global, document, current) {\n  var allOptions = [global, document, current];\n  var result = {\n    didParseCell: [],\n    willDrawCell: [],\n    didDrawCell: [],\n    didDrawPage: []\n  };\n  for (var _i = 0, allOptions_1 = allOptions; _i < allOptions_1.length; _i++) {\n    var options = allOptions_1[_i];\n    if (options.didParseCell) result.didParseCell.push(options.didParseCell);\n    if (options.willDrawCell) result.willDrawCell.push(options.willDrawCell);\n    if (options.didDrawCell) result.didDrawCell.push(options.didDrawCell);\n    if (options.didDrawPage) result.didDrawPage.push(options.didDrawPage);\n  }\n  return result;\n}\nfunction parseSettings(doc, options) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n  var margin = parseSpacing(options.margin, 40 / doc.scaleFactor());\n  var startY = (_a = getStartY(doc, options.startY)) !== null && _a !== void 0 ? _a : margin.top;\n  var showFoot;\n  if (options.showFoot === true) {\n    showFoot = 'everyPage';\n  } else if (options.showFoot === false) {\n    showFoot = 'never';\n  } else {\n    showFoot = (_b = options.showFoot) !== null && _b !== void 0 ? _b : 'everyPage';\n  }\n  var showHead;\n  if (options.showHead === true) {\n    showHead = 'everyPage';\n  } else if (options.showHead === false) {\n    showHead = 'never';\n  } else {\n    showHead = (_c = options.showHead) !== null && _c !== void 0 ? _c : 'everyPage';\n  }\n  var useCss = (_d = options.useCss) !== null && _d !== void 0 ? _d : false;\n  var theme = options.theme || (useCss ? 'plain' : 'striped');\n  var horizontalPageBreak = options.horizontalPageBreak ? true : false;\n  var horizontalPageBreakRepeat = (_e = options.horizontalPageBreakRepeat) !== null && _e !== void 0 ? _e : null;\n  return {\n    includeHiddenHtml: (_f = options.includeHiddenHtml) !== null && _f !== void 0 ? _f : false,\n    useCss: useCss,\n    theme: theme,\n    startY: startY,\n    margin: margin,\n    pageBreak: (_g = options.pageBreak) !== null && _g !== void 0 ? _g : 'auto',\n    rowPageBreak: (_h = options.rowPageBreak) !== null && _h !== void 0 ? _h : 'auto',\n    tableWidth: (_j = options.tableWidth) !== null && _j !== void 0 ? _j : 'auto',\n    showHead: showHead,\n    showFoot: showFoot,\n    tableLineWidth: (_k = options.tableLineWidth) !== null && _k !== void 0 ? _k : 0,\n    tableLineColor: (_l = options.tableLineColor) !== null && _l !== void 0 ? _l : 200,\n    horizontalPageBreak: horizontalPageBreak,\n    horizontalPageBreakRepeat: horizontalPageBreakRepeat\n  };\n}\nfunction getStartY(doc, userStartY) {\n  var previous = doc.getLastAutoTable();\n  var sf = doc.scaleFactor();\n  var currentPage = doc.pageNumber();\n  var isSamePageAsPreviousTable = false;\n  if (previous && previous.startPageNumber) {\n    var endingPage = previous.startPageNumber + previous.pageNumber - 1;\n    isSamePageAsPreviousTable = endingPage === currentPage;\n  }\n  if (typeof userStartY === 'number') {\n    return userStartY;\n  } else if (userStartY == null || userStartY === false) {\n    if (isSamePageAsPreviousTable && (previous === null || previous === void 0 ? void 0 : previous.finalY) != null) {\n      // Some users had issues with overlapping tables when they used multiple\n      // tables without setting startY so setting it here to a sensible default.\n      return previous.finalY + 20 / sf;\n    }\n  }\n  return null;\n}\nfunction parseContent$1(doc, options, window) {\n  var head = options.head || [];\n  var body = options.body || [];\n  var foot = options.foot || [];\n  if (options.html) {\n    var hidden = options.includeHiddenHtml;\n    if (window) {\n      var htmlContent = parseHtml(doc, options.html, window, hidden, options.useCss) || {};\n      head = htmlContent.head || head;\n      body = htmlContent.body || head;\n      foot = htmlContent.foot || head;\n    } else {\n      console.error('Cannot parse html in non browser environment');\n    }\n  }\n  var columns = options.columns || parseColumns(head, body, foot);\n  return {\n    columns: columns,\n    head: head,\n    body: body,\n    foot: foot\n  };\n}\nfunction parseColumns(head, body, foot) {\n  var firstRow = head[0] || body[0] || foot[0] || [];\n  var result = [];\n  Object.keys(firstRow).filter(function (key) {\n    return key !== '_element';\n  }).forEach(function (key) {\n    var colSpan = 1;\n    var input;\n    if (Array.isArray(firstRow)) {\n      input = firstRow[parseInt(key)];\n    } else {\n      input = firstRow[key];\n    }\n    if (typeof input === 'object' && !Array.isArray(input)) {\n      colSpan = (input === null || input === void 0 ? void 0 : input.colSpan) || 1;\n    }\n    for (var i = 0; i < colSpan; i++) {\n      var id = void 0;\n      if (Array.isArray(firstRow)) {\n        id = result.length;\n      } else {\n        id = key + (i > 0 ? \"_\".concat(i) : '');\n      }\n      var rowResult = {\n        dataKey: id\n      };\n      result.push(rowResult);\n    }\n  });\n  return result;\n}\nvar HookData = /** @class */function () {\n  function HookData(doc, table, cursor) {\n    this.table = table;\n    this.pageNumber = table.pageNumber;\n    this.pageCount = this.pageNumber;\n    this.settings = table.settings;\n    this.cursor = cursor;\n    this.doc = doc.getDocument();\n  }\n  return HookData;\n}();\nvar CellHookData = /** @class */function (_super) {\n  __extends(CellHookData, _super);\n  function CellHookData(doc, table, cell, row, column, cursor) {\n    var _this = _super.call(this, doc, table, cursor) || this;\n    _this.cell = cell;\n    _this.row = row;\n    _this.column = column;\n    _this.section = row.section;\n    return _this;\n  }\n  return CellHookData;\n}(HookData);\nvar Table = /** @class */function () {\n  function Table(input, content) {\n    this.pageNumber = 1;\n    // Deprecated, use pageNumber instead\n    // Not using getter since:\n    // https://github.com/simonbengtsson/jsPDF-AutoTable/issues/596\n    this.pageCount = 1;\n    this.id = input.id;\n    this.settings = input.settings;\n    this.styles = input.styles;\n    this.hooks = input.hooks;\n    this.columns = content.columns;\n    this.head = content.head;\n    this.body = content.body;\n    this.foot = content.foot;\n  }\n  Table.prototype.getHeadHeight = function (columns) {\n    return this.head.reduce(function (acc, row) {\n      return acc + row.getMaxCellHeight(columns);\n    }, 0);\n  };\n  Table.prototype.getFootHeight = function (columns) {\n    return this.foot.reduce(function (acc, row) {\n      return acc + row.getMaxCellHeight(columns);\n    }, 0);\n  };\n  Table.prototype.allRows = function () {\n    return this.head.concat(this.body).concat(this.foot);\n  };\n  Table.prototype.callCellHooks = function (doc, handlers, cell, row, column, cursor) {\n    for (var _i = 0, handlers_1 = handlers; _i < handlers_1.length; _i++) {\n      var handler = handlers_1[_i];\n      var data = new CellHookData(doc, this, cell, row, column, cursor);\n      var result = handler(data) === false;\n      // Make sure text is always string[] since user can assign string\n      cell.text = Array.isArray(cell.text) ? cell.text : [cell.text];\n      if (result) {\n        return false;\n      }\n    }\n    return true;\n  };\n  Table.prototype.callEndPageHooks = function (doc, cursor) {\n    doc.applyStyles(doc.userStyles);\n    for (var _i = 0, _a = this.hooks.didDrawPage; _i < _a.length; _i++) {\n      var handler = _a[_i];\n      handler(new HookData(doc, this, cursor));\n    }\n  };\n  Table.prototype.getWidth = function (pageWidth) {\n    if (typeof this.settings.tableWidth === 'number') {\n      return this.settings.tableWidth;\n    } else if (this.settings.tableWidth === 'wrap') {\n      var wrappedWidth = this.columns.reduce(function (total, col) {\n        return total + col.wrappedWidth;\n      }, 0);\n      return wrappedWidth;\n    } else {\n      var margin = this.settings.margin;\n      return pageWidth - margin.left - margin.right;\n    }\n  };\n  return Table;\n}();\nvar Row = /** @class */function () {\n  function Row(raw, index, section, cells, spansMultiplePages) {\n    if (spansMultiplePages === void 0) {\n      spansMultiplePages = false;\n    }\n    this.height = 0;\n    this.raw = raw;\n    if (raw instanceof HtmlRowInput) {\n      this.raw = raw._element;\n      this.element = raw._element;\n    }\n    this.index = index;\n    this.section = section;\n    this.cells = cells;\n    this.spansMultiplePages = spansMultiplePages;\n  }\n  Row.prototype.getMaxCellHeight = function (columns) {\n    var _this = this;\n    return columns.reduce(function (acc, column) {\n      var _a;\n      return Math.max(acc, ((_a = _this.cells[column.index]) === null || _a === void 0 ? void 0 : _a.height) || 0);\n    }, 0);\n  };\n  Row.prototype.hasRowSpan = function (columns) {\n    var _this = this;\n    return columns.filter(function (column) {\n      var cell = _this.cells[column.index];\n      if (!cell) return false;\n      return cell.rowSpan > 1;\n    }).length > 0;\n  };\n  Row.prototype.canEntireRowFit = function (height, columns) {\n    return this.getMaxCellHeight(columns) <= height;\n  };\n  Row.prototype.getMinimumRowHeight = function (columns, doc) {\n    var _this = this;\n    return columns.reduce(function (acc, column) {\n      var cell = _this.cells[column.index];\n      if (!cell) return 0;\n      var fontHeight = cell.styles.fontSize / doc.scaleFactor() * FONT_ROW_RATIO;\n      var vPadding = cell.padding('vertical');\n      var oneRowHeight = vPadding + fontHeight;\n      return oneRowHeight > acc ? oneRowHeight : acc;\n    }, 0);\n  };\n  return Row;\n}();\nvar Cell = /** @class */function () {\n  function Cell(raw, styles, section) {\n    var _a, _b;\n    this.contentHeight = 0;\n    this.contentWidth = 0;\n    this.wrappedWidth = 0;\n    this.minReadableWidth = 0;\n    this.minWidth = 0;\n    this.width = 0;\n    this.height = 0;\n    this.x = 0;\n    this.y = 0;\n    this.styles = styles;\n    this.section = section;\n    this.raw = raw;\n    var content = raw;\n    if (raw != null && typeof raw === 'object' && !Array.isArray(raw)) {\n      this.rowSpan = raw.rowSpan || 1;\n      this.colSpan = raw.colSpan || 1;\n      content = (_b = (_a = raw.content) !== null && _a !== void 0 ? _a : raw.title) !== null && _b !== void 0 ? _b : raw;\n      if (raw._element) {\n        this.raw = raw._element;\n      }\n    } else {\n      this.rowSpan = 1;\n      this.colSpan = 1;\n    }\n    // Stringify 0 and false, but not undefined or null\n    var text = content != null ? '' + content : '';\n    var splitRegex = /\\r\\n|\\r|\\n/g;\n    this.text = text.split(splitRegex);\n  }\n  Cell.prototype.getTextPos = function () {\n    var y;\n    if (this.styles.valign === 'top') {\n      y = this.y + this.padding('top');\n    } else if (this.styles.valign === 'bottom') {\n      y = this.y + this.height - this.padding('bottom');\n    } else {\n      var netHeight = this.height - this.padding('vertical');\n      y = this.y + netHeight / 2 + this.padding('top');\n    }\n    var x;\n    if (this.styles.halign === 'right') {\n      x = this.x + this.width - this.padding('right');\n    } else if (this.styles.halign === 'center') {\n      var netWidth = this.width - this.padding('horizontal');\n      x = this.x + netWidth / 2 + this.padding('left');\n    } else {\n      x = this.x + this.padding('left');\n    }\n    return {\n      x: x,\n      y: y\n    };\n  };\n  Cell.prototype.getContentHeight = function (scaleFactor) {\n    var lineCount = Array.isArray(this.text) ? this.text.length : 1;\n    var fontHeight = this.styles.fontSize / scaleFactor * FONT_ROW_RATIO;\n    var height = lineCount * fontHeight + this.padding('vertical');\n    return Math.max(height, this.styles.minCellHeight);\n  };\n  Cell.prototype.padding = function (name) {\n    var padding = parseSpacing(this.styles.cellPadding, 0);\n    if (name === 'vertical') {\n      return padding.top + padding.bottom;\n    } else if (name === 'horizontal') {\n      return padding.left + padding.right;\n    } else {\n      return padding[name];\n    }\n  };\n  return Cell;\n}();\nvar Column = /** @class */function () {\n  function Column(dataKey, raw, index) {\n    this.wrappedWidth = 0;\n    this.minReadableWidth = 0;\n    this.minWidth = 0;\n    this.width = 0;\n    this.dataKey = dataKey;\n    this.raw = raw;\n    this.index = index;\n  }\n  Column.prototype.getMaxCustomCellWidth = function (table) {\n    var max = 0;\n    for (var _i = 0, _a = table.allRows(); _i < _a.length; _i++) {\n      var row = _a[_i];\n      var cell = row.cells[this.index];\n      if (cell && typeof cell.styles.cellWidth === 'number') {\n        max = Math.max(max, cell.styles.cellWidth);\n      }\n    }\n    return max;\n  };\n  return Column;\n}();\nvar getPageAvailableWidth = function (doc, table) {\n  var margins = parseSpacing(table.settings.margin, 0);\n  var availablePageWidth = doc.pageSize().width - (margins.left + margins.right);\n  return availablePageWidth;\n};\n// get columns can be fit into page\nvar getColumnsCanFitInPage = function (doc, table, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  // get page width\n  var availablePageWidth = getPageAvailableWidth(doc, table);\n  var remainingWidth = availablePageWidth;\n  // get column data key to repeat\n  var horizontalPageBreakRepeat = table.settings.horizontalPageBreakRepeat;\n  var repeatColumn = null;\n  var cols = [];\n  var columns = [];\n  var len = table.columns.length;\n  var i = config && config.start ? config.start : 0;\n  // code to repeat the given column in split pages\n  if (horizontalPageBreakRepeat != null) {\n    repeatColumn = table.columns.find(function (item) {\n      return item.dataKey === horizontalPageBreakRepeat || item.index === horizontalPageBreakRepeat;\n    });\n    if (repeatColumn) {\n      cols.push(repeatColumn.index);\n      columns.push(table.columns[repeatColumn.index]);\n      remainingWidth = remainingWidth - repeatColumn.wrappedWidth;\n    }\n  }\n  while (i < len) {\n    if ((repeatColumn === null || repeatColumn === void 0 ? void 0 : repeatColumn.index) === i) {\n      i++; // prevent columnDataKeyToRepeat to be pushed twice in a page\n      continue;\n    }\n    var colWidth = table.columns[i].wrappedWidth;\n    if (remainingWidth < colWidth) {\n      // check if it's first column in the sequence then add it into result\n      if (i === 0 || i === config.start) {\n        // this cell width is more than page width set it available pagewidth\n        /* table.columns[i].wrappedWidth = availablePageWidth\n        table.columns[i].minWidth = availablePageWidth */\n        cols.push(i);\n        columns.push(table.columns[i]);\n      }\n      // can't print more columns in same page\n      break;\n    }\n    cols.push(i);\n    columns.push(table.columns[i]);\n    remainingWidth = remainingWidth - colWidth;\n    i++;\n  }\n  return {\n    colIndexes: cols,\n    columns: columns,\n    lastIndex: i\n  };\n};\nvar calculateAllColumnsCanFitInPage = function (doc, table) {\n  // const margins = table.settings.margin;\n  // const availablePageWidth = doc.pageSize().width - (margins.left + margins.right);\n  var allResults = [];\n  var index = 0;\n  var len = table.columns.length;\n  while (index < len) {\n    var result = getColumnsCanFitInPage(doc, table, {\n      start: index === 0 ? 0 : index\n    });\n    if (result && result.columns && result.columns.length) {\n      index = result.lastIndex;\n      allResults.push(result);\n    } else {\n      index++;\n    }\n  }\n  return allResults;\n};\nvar TablePrinter = {\n  getColumnsCanFitInPage: getColumnsCanFitInPage,\n  calculateAllColumnsCanFitInPage: calculateAllColumnsCanFitInPage,\n  getPageAvailableWidth: getPageAvailableWidth\n};\nfunction drawTable(jsPDFDoc, table) {\n  var settings = table.settings;\n  var startY = settings.startY;\n  var margin = settings.margin;\n  var cursor = {\n    x: margin.left,\n    y: startY\n  };\n  var sectionsHeight = table.getHeadHeight(table.columns) + table.getFootHeight(table.columns);\n  var minTableBottomPos = startY + margin.bottom + sectionsHeight;\n  if (settings.pageBreak === 'avoid') {\n    var rows = table.allRows();\n    var tableHeight = rows.reduce(function (acc, row) {\n      return acc + row.height;\n    }, 0);\n    minTableBottomPos += tableHeight;\n  }\n  var doc = new DocHandler(jsPDFDoc);\n  if (settings.pageBreak === 'always' || settings.startY != null && minTableBottomPos > doc.pageSize().height) {\n    nextPage(doc);\n    cursor.y = margin.top;\n  }\n  var startPos = assign({}, cursor);\n  table.startPageNumber = doc.pageNumber();\n  if (settings.horizontalPageBreak === true) {\n    // managed flow for split columns\n    printTableWithHorizontalPageBreak(doc, table, startPos, cursor);\n  } else {\n    // normal flow\n    doc.applyStyles(doc.userStyles);\n    if (settings.showHead === 'firstPage' || settings.showHead === 'everyPage') {\n      table.head.forEach(function (row) {\n        return printRow(doc, table, row, cursor, table.columns);\n      });\n    }\n    doc.applyStyles(doc.userStyles);\n    table.body.forEach(function (row, index) {\n      var isLastRow = index === table.body.length - 1;\n      printFullRow(doc, table, row, isLastRow, startPos, cursor, table.columns);\n    });\n    doc.applyStyles(doc.userStyles);\n    if (settings.showFoot === 'lastPage' || settings.showFoot === 'everyPage') {\n      table.foot.forEach(function (row) {\n        return printRow(doc, table, row, cursor, table.columns);\n      });\n    }\n  }\n  addTableBorder(doc, table, startPos, cursor);\n  table.callEndPageHooks(doc, cursor);\n  table.finalY = cursor.y;\n  jsPDFDoc.lastAutoTable = table;\n  jsPDFDoc.previousAutoTable = table; // Deprecated\n  if (jsPDFDoc.autoTable) jsPDFDoc.autoTable.previous = table; // Deprecated\n  doc.applyStyles(doc.userStyles);\n}\nfunction printTableWithHorizontalPageBreak(doc, table, startPos, cursor) {\n  // calculate width of columns and render only those which can fit into page\n  var allColumnsCanFitResult = TablePrinter.calculateAllColumnsCanFitInPage(doc, table);\n  allColumnsCanFitResult.map(function (colsAndIndexes, index) {\n    doc.applyStyles(doc.userStyles);\n    // add page to print next columns in new page\n    if (index > 0) {\n      addPage(doc, table, startPos, cursor, colsAndIndexes.columns);\n    } else {\n      // print head for selected columns\n      printHead(doc, table, cursor, colsAndIndexes.columns);\n    }\n    // print body for selected columns\n    printBody(doc, table, startPos, cursor, colsAndIndexes.columns);\n    // print foot for selected columns\n    printFoot(doc, table, cursor, colsAndIndexes.columns);\n  });\n}\nfunction printHead(doc, table, cursor, columns) {\n  var settings = table.settings;\n  doc.applyStyles(doc.userStyles);\n  if (settings.showHead === 'firstPage' || settings.showHead === 'everyPage') {\n    table.head.forEach(function (row) {\n      return printRow(doc, table, row, cursor, columns);\n    });\n  }\n}\nfunction printBody(doc, table, startPos, cursor, columns) {\n  doc.applyStyles(doc.userStyles);\n  table.body.forEach(function (row, index) {\n    var isLastRow = index === table.body.length - 1;\n    printFullRow(doc, table, row, isLastRow, startPos, cursor, columns);\n  });\n}\nfunction printFoot(doc, table, cursor, columns) {\n  var settings = table.settings;\n  doc.applyStyles(doc.userStyles);\n  if (settings.showFoot === 'lastPage' || settings.showFoot === 'everyPage') {\n    table.foot.forEach(function (row) {\n      return printRow(doc, table, row, cursor, columns);\n    });\n  }\n}\nfunction getRemainingLineCount(cell, remainingPageSpace, doc) {\n  var fontHeight = cell.styles.fontSize / doc.scaleFactor() * FONT_ROW_RATIO;\n  var vPadding = cell.padding('vertical');\n  var remainingLines = Math.floor((remainingPageSpace - vPadding) / fontHeight);\n  return Math.max(0, remainingLines);\n}\nfunction modifyRowToFit(row, remainingPageSpace, table, doc) {\n  var cells = {};\n  row.spansMultiplePages = true;\n  row.height = 0;\n  var rowHeight = 0;\n  for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n    var column = _a[_i];\n    var cell = row.cells[column.index];\n    if (!cell) continue;\n    if (!Array.isArray(cell.text)) {\n      cell.text = [cell.text];\n    }\n    var remainderCell = new Cell(cell.raw, cell.styles, cell.section);\n    remainderCell = assign(remainderCell, cell);\n    remainderCell.text = [];\n    var remainingLineCount = getRemainingLineCount(cell, remainingPageSpace, doc);\n    if (cell.text.length > remainingLineCount) {\n      remainderCell.text = cell.text.splice(remainingLineCount, cell.text.length);\n    }\n    var scaleFactor = doc.scaleFactor();\n    cell.contentHeight = cell.getContentHeight(scaleFactor);\n    if (cell.contentHeight >= remainingPageSpace) {\n      cell.contentHeight = remainingPageSpace;\n      remainderCell.styles.minCellHeight -= remainingPageSpace;\n    }\n    if (cell.contentHeight > row.height) {\n      row.height = cell.contentHeight;\n    }\n    remainderCell.contentHeight = remainderCell.getContentHeight(scaleFactor);\n    if (remainderCell.contentHeight > rowHeight) {\n      rowHeight = remainderCell.contentHeight;\n    }\n    cells[column.index] = remainderCell;\n  }\n  var remainderRow = new Row(row.raw, -1, row.section, cells, true);\n  remainderRow.height = rowHeight;\n  for (var _b = 0, _c = table.columns; _b < _c.length; _b++) {\n    var column = _c[_b];\n    var remainderCell = remainderRow.cells[column.index];\n    if (remainderCell) {\n      remainderCell.height = remainderRow.height;\n    }\n    var cell = row.cells[column.index];\n    if (cell) {\n      cell.height = row.height;\n    }\n  }\n  return remainderRow;\n}\nfunction shouldPrintOnCurrentPage(doc, row, remainingPageSpace, table) {\n  var pageHeight = doc.pageSize().height;\n  var margin = table.settings.margin;\n  var marginHeight = margin.top + margin.bottom;\n  var maxRowHeight = pageHeight - marginHeight;\n  if (row.section === 'body') {\n    // Should also take into account that head and foot is not\n    // on every page with some settings\n    maxRowHeight -= table.getHeadHeight(table.columns) + table.getFootHeight(table.columns);\n  }\n  var minRowHeight = row.getMinimumRowHeight(table.columns, doc);\n  var minRowFits = minRowHeight < remainingPageSpace;\n  if (minRowHeight > maxRowHeight) {\n    console.error(\"Will not be able to print row \".concat(row.index, \" correctly since it's minimum height is larger than page height\"));\n    return true;\n  }\n  if (!minRowFits) {\n    return false;\n  }\n  var rowHasRowSpanCell = row.hasRowSpan(table.columns);\n  var rowHigherThanPage = row.getMaxCellHeight(table.columns) > maxRowHeight;\n  if (rowHigherThanPage) {\n    if (rowHasRowSpanCell) {\n      console.error(\"The content of row \".concat(row.index, \" will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.\"));\n    }\n    return true;\n  }\n  if (rowHasRowSpanCell) {\n    // Currently a new page is required whenever a rowspan row don't fit a page.\n    return false;\n  }\n  if (table.settings.rowPageBreak === 'avoid') {\n    return false;\n  }\n  // In all other cases print the row on current page\n  return true;\n}\nfunction printFullRow(doc, table, row, isLastRow, startPos, cursor, columns) {\n  var remainingSpace = getRemainingPageSpace(doc, table, isLastRow, cursor);\n  if (row.canEntireRowFit(remainingSpace, columns)) {\n    printRow(doc, table, row, cursor, columns);\n  } else {\n    if (shouldPrintOnCurrentPage(doc, row, remainingSpace, table)) {\n      var remainderRow = modifyRowToFit(row, remainingSpace, table, doc);\n      printRow(doc, table, row, cursor, columns);\n      addPage(doc, table, startPos, cursor, columns);\n      printFullRow(doc, table, remainderRow, isLastRow, startPos, cursor, columns);\n    } else {\n      addPage(doc, table, startPos, cursor, columns);\n      printFullRow(doc, table, row, isLastRow, startPos, cursor, columns);\n    }\n  }\n}\nfunction printRow(doc, table, row, cursor, columns) {\n  cursor.x = table.settings.margin.left;\n  for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n    var column = columns_1[_i];\n    var cell = row.cells[column.index];\n    if (!cell) {\n      cursor.x += column.width;\n      continue;\n    }\n    doc.applyStyles(cell.styles);\n    cell.x = cursor.x;\n    cell.y = cursor.y;\n    var result = table.callCellHooks(doc, table.hooks.willDrawCell, cell, row, column, cursor);\n    if (result === false) {\n      cursor.x += column.width;\n      continue;\n    }\n    drawCellBorders(doc, cell, cursor);\n    var textPos = cell.getTextPos();\n    autoTableText(cell.text, textPos.x, textPos.y, {\n      halign: cell.styles.halign,\n      valign: cell.styles.valign,\n      maxWidth: Math.ceil(cell.width - cell.padding('left') - cell.padding('right'))\n    }, doc.getDocument());\n    table.callCellHooks(doc, table.hooks.didDrawCell, cell, row, column, cursor);\n    cursor.x += column.width;\n  }\n  cursor.y += row.height;\n}\nfunction drawCellBorders(doc, cell, cursor) {\n  var cellStyles = cell.styles;\n  doc.getDocument().setFillColor(doc.getDocument().getFillColor());\n  if (typeof cellStyles.lineWidth === 'number') {\n    // prints normal cell border\n    var fillStyle = getFillStyle(cellStyles.lineWidth, cellStyles.fillColor);\n    if (fillStyle) {\n      doc.rect(cell.x, cursor.y, cell.width, cell.height, fillStyle);\n    }\n  } else if (typeof cellStyles.lineWidth === 'object') {\n    doc.rect(cell.x, cursor.y, cell.width, cell.height, 'F');\n    var sides = Object.keys(cellStyles.lineWidth);\n    var lineWidth_1 = cellStyles.lineWidth;\n    sides.map(function (side) {\n      var fillStyle = getFillStyle(lineWidth_1[side], cellStyles.fillColor);\n      drawBorderForSide(doc, cell, cursor, side, fillStyle || 'S', lineWidth_1[side]);\n    });\n  }\n}\nfunction drawBorderForSide(doc, cell, cursor, side, fillStyle, lineWidth) {\n  var x1, y1, x2, y2;\n  switch (side) {\n    case 'top':\n      x1 = cursor.x;\n      y1 = cursor.y;\n      x2 = cursor.x + cell.width;\n      y2 = cursor.y;\n      break;\n    case 'left':\n      x1 = cursor.x;\n      y1 = cursor.y;\n      x2 = cursor.x;\n      y2 = cursor.y + cell.height;\n      break;\n    case 'right':\n      x1 = cursor.x + cell.width;\n      y1 = cursor.y;\n      x2 = cursor.x + cell.width;\n      y2 = cursor.y + cell.height;\n      break;\n    default:\n      // default it will print bottom\n      x1 = cursor.x;\n      y1 = cursor.y + cell.height - lineWidth;\n      x2 = cursor.x + cell.width;\n      y2 = cursor.y + cell.height - lineWidth;\n      break;\n  }\n  doc.getDocument().setLineWidth(lineWidth);\n  doc.getDocument().line(x1, y1, x2, y2, fillStyle);\n}\nfunction getRemainingPageSpace(doc, table, isLastRow, cursor) {\n  var bottomContentHeight = table.settings.margin.bottom;\n  var showFoot = table.settings.showFoot;\n  if (showFoot === 'everyPage' || showFoot === 'lastPage' && isLastRow) {\n    bottomContentHeight += table.getFootHeight(table.columns);\n  }\n  return doc.pageSize().height - cursor.y - bottomContentHeight;\n}\nfunction addPage(doc, table, startPos, cursor, columns) {\n  if (columns === void 0) {\n    columns = [];\n  }\n  doc.applyStyles(doc.userStyles);\n  if (table.settings.showFoot === 'everyPage') {\n    table.foot.forEach(function (row) {\n      return printRow(doc, table, row, cursor, columns);\n    });\n  }\n  // Add user content just before adding new page ensure it will\n  // be drawn above other things on the page\n  table.callEndPageHooks(doc, cursor);\n  var margin = table.settings.margin;\n  addTableBorder(doc, table, startPos, cursor);\n  nextPage(doc);\n  table.pageNumber++;\n  table.pageCount++;\n  cursor.x = margin.left;\n  cursor.y = margin.top;\n  startPos.y = margin.top;\n  if (table.settings.showHead === 'everyPage') {\n    table.head.forEach(function (row) {\n      return printRow(doc, table, row, cursor, columns);\n    });\n  }\n}\nfunction nextPage(doc) {\n  var current = doc.pageNumber();\n  doc.setPage(current + 1);\n  var newCurrent = doc.pageNumber();\n  if (newCurrent === current) {\n    doc.addPage();\n  }\n}\n\n/**\n * Calculate the column widths\n */\nfunction calculateWidths(doc, table) {\n  calculate(doc, table);\n  var resizableColumns = [];\n  var initialTableWidth = 0;\n  table.columns.forEach(function (column) {\n    var customWidth = column.getMaxCustomCellWidth(table);\n    if (customWidth) {\n      // final column width\n      column.width = customWidth;\n    } else {\n      // initial column width (will be resized)\n      column.width = column.wrappedWidth;\n      resizableColumns.push(column);\n    }\n    initialTableWidth += column.width;\n  });\n  // width difference that needs to be distributed\n  var resizeWidth = table.getWidth(doc.pageSize().width) - initialTableWidth;\n  // first resize attempt: with respect to minReadableWidth and minWidth\n  if (resizeWidth) {\n    resizeWidth = resizeColumns(resizableColumns, resizeWidth, function (column) {\n      return Math.max(column.minReadableWidth, column.minWidth);\n    });\n  }\n  // second resize attempt: ignore minReadableWidth but respect minWidth\n  if (resizeWidth) {\n    resizeWidth = resizeColumns(resizableColumns, resizeWidth, function (column) {\n      return column.minWidth;\n    });\n  }\n  resizeWidth = Math.abs(resizeWidth);\n  if (!table.settings.horizontalPageBreak && resizeWidth > 0.1 / doc.scaleFactor()) {\n    // Table can't get smaller due to custom-width or minWidth restrictions\n    // We can't really do much here. Up to user to for example\n    // reduce font size, increase page size or remove custom cell widths\n    // to allow more columns to be reduced in size\n    resizeWidth = resizeWidth < 1 ? resizeWidth : Math.round(resizeWidth);\n    console.error(\"Of the table content, \".concat(resizeWidth, \" units width could not fit page\"));\n  }\n  applyColSpans(table);\n  fitContent(table, doc);\n  applyRowSpans(table);\n}\nfunction calculate(doc, table) {\n  var sf = doc.scaleFactor();\n  var horizontalPageBreak = table.settings.horizontalPageBreak;\n  var availablePageWidth = TablePrinter.getPageAvailableWidth(doc, table);\n  table.allRows().forEach(function (row) {\n    for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      var cell = row.cells[column.index];\n      if (!cell) continue;\n      var hooks = table.hooks.didParseCell;\n      table.callCellHooks(doc, hooks, cell, row, column, null);\n      var padding = cell.padding('horizontal');\n      cell.contentWidth = getStringWidth(cell.text, cell.styles, doc) + padding;\n      var longestWordWidth = getStringWidth(cell.text.join(' ').split(/\\s+/), cell.styles, doc);\n      cell.minReadableWidth = longestWordWidth + cell.padding('horizontal');\n      if (typeof cell.styles.cellWidth === 'number') {\n        cell.minWidth = cell.styles.cellWidth;\n        cell.wrappedWidth = cell.styles.cellWidth;\n      } else if (cell.styles.cellWidth === 'wrap' || horizontalPageBreak === true) {\n        // cell width should not be more than available page width\n        if (cell.contentWidth > availablePageWidth) {\n          cell.minWidth = availablePageWidth;\n          cell.wrappedWidth = availablePageWidth;\n        } else {\n          cell.minWidth = cell.contentWidth;\n          cell.wrappedWidth = cell.contentWidth;\n        }\n      } else {\n        // auto\n        var defaultMinWidth = 10 / sf;\n        cell.minWidth = cell.styles.minCellWidth || defaultMinWidth;\n        cell.wrappedWidth = cell.contentWidth;\n        if (cell.minWidth > cell.wrappedWidth) {\n          cell.wrappedWidth = cell.minWidth;\n        }\n      }\n    }\n  });\n  table.allRows().forEach(function (row) {\n    for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      var cell = row.cells[column.index];\n      // For now we ignore the minWidth and wrappedWidth of colspan cells when calculating colspan widths.\n      // Could probably be improved upon however.\n      if (cell && cell.colSpan === 1) {\n        column.wrappedWidth = Math.max(column.wrappedWidth, cell.wrappedWidth);\n        column.minWidth = Math.max(column.minWidth, cell.minWidth);\n        column.minReadableWidth = Math.max(column.minReadableWidth, cell.minReadableWidth);\n      } else {\n        // Respect cellWidth set in columnStyles even if there is no cells for this column\n        // or if the column only have colspan cells. Since the width of colspan cells\n        // does not affect the width of columns, setting columnStyles cellWidth enables the\n        // user to at least do it manually.\n        // Note that this is not perfect for now since for example row and table styles are\n        // not accounted for\n        var columnStyles = table.styles.columnStyles[column.dataKey] || table.styles.columnStyles[column.index] || {};\n        var cellWidth = columnStyles.cellWidth || columnStyles.minCellWidth;\n        if (cellWidth && typeof cellWidth === 'number') {\n          column.minWidth = cellWidth;\n          column.wrappedWidth = cellWidth;\n        }\n      }\n      if (cell) {\n        // Make sure all columns get at least min width even though width calculations are not based on them\n        if (cell.colSpan > 1 && !column.minWidth) {\n          column.minWidth = cell.minWidth;\n        }\n        if (cell.colSpan > 1 && !column.wrappedWidth) {\n          column.wrappedWidth = cell.minWidth;\n        }\n      }\n    }\n  });\n}\n/**\n * Distribute resizeWidth on passed resizable columns\n */\nfunction resizeColumns(columns, resizeWidth, getMinWidth) {\n  var initialResizeWidth = resizeWidth;\n  var sumWrappedWidth = columns.reduce(function (acc, column) {\n    return acc + column.wrappedWidth;\n  }, 0);\n  for (var i = 0; i < columns.length; i++) {\n    var column = columns[i];\n    var ratio = column.wrappedWidth / sumWrappedWidth;\n    var suggestedChange = initialResizeWidth * ratio;\n    var suggestedWidth = column.width + suggestedChange;\n    var minWidth = getMinWidth(column);\n    var newWidth = suggestedWidth < minWidth ? minWidth : suggestedWidth;\n    resizeWidth -= newWidth - column.width;\n    column.width = newWidth;\n  }\n  resizeWidth = Math.round(resizeWidth * 1e10) / 1e10;\n  // Run the resizer again if there's remaining width needs\n  // to be distributed and there're columns that can be resized\n  if (resizeWidth) {\n    var resizableColumns = columns.filter(function (column) {\n      return resizeWidth < 0 ? column.width > getMinWidth(column) // check if column can shrink\n      : true; // check if column can grow\n    });\n    if (resizableColumns.length) {\n      resizeWidth = resizeColumns(resizableColumns, resizeWidth, getMinWidth);\n    }\n  }\n  return resizeWidth;\n}\nfunction applyRowSpans(table) {\n  var rowSpanCells = {};\n  var colRowSpansLeft = 1;\n  var all = table.allRows();\n  for (var rowIndex = 0; rowIndex < all.length; rowIndex++) {\n    var row = all[rowIndex];\n    for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      var data = rowSpanCells[column.index];\n      if (colRowSpansLeft > 1) {\n        colRowSpansLeft--;\n        delete row.cells[column.index];\n      } else if (data) {\n        data.cell.height += row.height;\n        colRowSpansLeft = data.cell.colSpan;\n        delete row.cells[column.index];\n        data.left--;\n        if (data.left <= 1) {\n          delete rowSpanCells[column.index];\n        }\n      } else {\n        var cell = row.cells[column.index];\n        if (!cell) {\n          continue;\n        }\n        cell.height = row.height;\n        if (cell.rowSpan > 1) {\n          var remaining = all.length - rowIndex;\n          var left = cell.rowSpan > remaining ? remaining : cell.rowSpan;\n          rowSpanCells[column.index] = {\n            cell: cell,\n            left: left,\n            row: row\n          };\n        }\n      }\n    }\n  }\n}\nfunction applyColSpans(table) {\n  var all = table.allRows();\n  for (var rowIndex = 0; rowIndex < all.length; rowIndex++) {\n    var row = all[rowIndex];\n    var colSpanCell = null;\n    var combinedColSpanWidth = 0;\n    var colSpansLeft = 0;\n    for (var columnIndex = 0; columnIndex < table.columns.length; columnIndex++) {\n      var column = table.columns[columnIndex];\n      // Width and colspan\n      colSpansLeft -= 1;\n      if (colSpansLeft > 1 && table.columns[columnIndex + 1]) {\n        combinedColSpanWidth += column.width;\n        delete row.cells[column.index];\n      } else if (colSpanCell) {\n        var cell = colSpanCell;\n        delete row.cells[column.index];\n        colSpanCell = null;\n        cell.width = column.width + combinedColSpanWidth;\n      } else {\n        var cell = row.cells[column.index];\n        if (!cell) continue;\n        colSpansLeft = cell.colSpan;\n        combinedColSpanWidth = 0;\n        if (cell.colSpan > 1) {\n          colSpanCell = cell;\n          combinedColSpanWidth += column.width;\n          continue;\n        }\n        cell.width = column.width + combinedColSpanWidth;\n      }\n    }\n  }\n}\nfunction fitContent(table, doc) {\n  var rowSpanHeight = {\n    count: 0,\n    height: 0\n  };\n  for (var _i = 0, _a = table.allRows(); _i < _a.length; _i++) {\n    var row = _a[_i];\n    for (var _b = 0, _c = table.columns; _b < _c.length; _b++) {\n      var column = _c[_b];\n      var cell = row.cells[column.index];\n      if (!cell) continue;\n      doc.applyStyles(cell.styles, true);\n      var textSpace = cell.width - cell.padding('horizontal');\n      if (cell.styles.overflow === 'linebreak') {\n        // Add one pt to textSpace to fix rounding error\n        cell.text = doc.splitTextToSize(cell.text, textSpace + 1 / doc.scaleFactor(), {\n          fontSize: cell.styles.fontSize\n        });\n      } else if (cell.styles.overflow === 'ellipsize') {\n        cell.text = ellipsize(cell.text, textSpace, cell.styles, doc, '...');\n      } else if (cell.styles.overflow === 'hidden') {\n        cell.text = ellipsize(cell.text, textSpace, cell.styles, doc, '');\n      } else if (typeof cell.styles.overflow === 'function') {\n        var result = cell.styles.overflow(cell.text, textSpace);\n        if (typeof result === 'string') {\n          cell.text = [result];\n        } else {\n          cell.text = result;\n        }\n      }\n      cell.contentHeight = cell.getContentHeight(doc.scaleFactor());\n      var realContentHeight = cell.contentHeight / cell.rowSpan;\n      if (cell.rowSpan > 1 && rowSpanHeight.count * rowSpanHeight.height < realContentHeight * cell.rowSpan) {\n        rowSpanHeight = {\n          height: realContentHeight,\n          count: cell.rowSpan\n        };\n      } else if (rowSpanHeight && rowSpanHeight.count > 0) {\n        if (rowSpanHeight.height > realContentHeight) {\n          realContentHeight = rowSpanHeight.height;\n        }\n      }\n      if (realContentHeight > row.height) {\n        row.height = realContentHeight;\n      }\n    }\n    rowSpanHeight.count--;\n  }\n}\nfunction ellipsize(text, width, styles, doc, overflow) {\n  return text.map(function (str) {\n    return ellipsizeStr(str, width, styles, doc, overflow);\n  });\n}\nfunction ellipsizeStr(text, width, styles, doc, overflow) {\n  var precision = 10000 * doc.scaleFactor();\n  width = Math.ceil(width * precision) / precision;\n  if (width >= getStringWidth(text, styles, doc)) {\n    return text;\n  }\n  while (width < getStringWidth(text + overflow, styles, doc)) {\n    if (text.length <= 1) {\n      break;\n    }\n    text = text.substring(0, text.length - 1);\n  }\n  return text.trim() + overflow;\n}\nfunction createTable(jsPDFDoc, input) {\n  var doc = new DocHandler(jsPDFDoc);\n  var content = parseContent(input, doc.scaleFactor());\n  var table = new Table(input, content);\n  calculateWidths(doc, table);\n  doc.applyStyles(doc.userStyles);\n  return table;\n}\nfunction parseContent(input, sf) {\n  var content = input.content;\n  var columns = createColumns(content.columns);\n  // If no head or foot is set, try generating it with content from columns\n  if (content.head.length === 0) {\n    var sectionRow = generateSectionRow(columns, 'head');\n    if (sectionRow) content.head.push(sectionRow);\n  }\n  if (content.foot.length === 0) {\n    var sectionRow = generateSectionRow(columns, 'foot');\n    if (sectionRow) content.foot.push(sectionRow);\n  }\n  var theme = input.settings.theme;\n  var styles = input.styles;\n  return {\n    columns: columns,\n    head: parseSection('head', content.head, columns, styles, theme, sf),\n    body: parseSection('body', content.body, columns, styles, theme, sf),\n    foot: parseSection('foot', content.foot, columns, styles, theme, sf)\n  };\n}\nfunction parseSection(sectionName, sectionRows, columns, styleProps, theme, scaleFactor) {\n  var rowSpansLeftForColumn = {};\n  var result = sectionRows.map(function (rawRow, rowIndex) {\n    var skippedRowForRowSpans = 0;\n    var cells = {};\n    var colSpansAdded = 0;\n    var columnSpansLeft = 0;\n    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n      var column = columns_1[_i];\n      if (rowSpansLeftForColumn[column.index] == null || rowSpansLeftForColumn[column.index].left === 0) {\n        if (columnSpansLeft === 0) {\n          var rawCell = void 0;\n          if (Array.isArray(rawRow)) {\n            rawCell = rawRow[column.index - colSpansAdded - skippedRowForRowSpans];\n          } else {\n            rawCell = rawRow[column.dataKey];\n          }\n          var cellInputStyles = {};\n          if (typeof rawCell === 'object' && !Array.isArray(rawCell)) {\n            cellInputStyles = (rawCell === null || rawCell === void 0 ? void 0 : rawCell.styles) || {};\n          }\n          var styles = cellStyles(sectionName, column, rowIndex, theme, styleProps, scaleFactor, cellInputStyles);\n          var cell = new Cell(rawCell, styles, sectionName);\n          // dataKey is not used internally no more but keep for\n          // backwards compat in hooks\n          cells[column.dataKey] = cell;\n          cells[column.index] = cell;\n          columnSpansLeft = cell.colSpan - 1;\n          rowSpansLeftForColumn[column.index] = {\n            left: cell.rowSpan - 1,\n            times: columnSpansLeft\n          };\n        } else {\n          columnSpansLeft--;\n          colSpansAdded++;\n        }\n      } else {\n        rowSpansLeftForColumn[column.index].left--;\n        columnSpansLeft = rowSpansLeftForColumn[column.index].times;\n        skippedRowForRowSpans++;\n      }\n    }\n    return new Row(rawRow, rowIndex, sectionName, cells);\n  });\n  return result;\n}\nfunction generateSectionRow(columns, section) {\n  var sectionRow = {};\n  columns.forEach(function (col) {\n    if (col.raw != null) {\n      var title = getSectionTitle(section, col.raw);\n      if (title != null) sectionRow[col.dataKey] = title;\n    }\n  });\n  return Object.keys(sectionRow).length > 0 ? sectionRow : null;\n}\nfunction getSectionTitle(section, column) {\n  if (section === 'head') {\n    if (typeof column === 'object') {\n      return column.header || column.title || null;\n    } else if (typeof column === 'string' || typeof column === 'number') {\n      return column;\n    }\n  } else if (section === 'foot' && typeof column === 'object') {\n    return column.footer;\n  }\n  return null;\n}\nfunction createColumns(columns) {\n  return columns.map(function (input, index) {\n    var _a, _b;\n    var key;\n    if (typeof input === 'object') {\n      key = (_b = (_a = input.dataKey) !== null && _a !== void 0 ? _a : input.key) !== null && _b !== void 0 ? _b : index;\n    } else {\n      key = index;\n    }\n    return new Column(key, input, index);\n  });\n}\nfunction cellStyles(sectionName, column, rowIndex, themeName, styles, scaleFactor, cellInputStyles) {\n  var theme = getTheme(themeName);\n  var sectionStyles;\n  if (sectionName === 'head') {\n    sectionStyles = styles.headStyles;\n  } else if (sectionName === 'body') {\n    sectionStyles = styles.bodyStyles;\n  } else if (sectionName === 'foot') {\n    sectionStyles = styles.footStyles;\n  }\n  var otherStyles = assign({}, theme.table, theme[sectionName], styles.styles, sectionStyles);\n  var columnStyles = styles.columnStyles[column.dataKey] || styles.columnStyles[column.index] || {};\n  var colStyles = sectionName === 'body' ? columnStyles : {};\n  var rowStyles = sectionName === 'body' && rowIndex % 2 === 0 ? assign({}, theme.alternateRow, styles.alternateRowStyles) : {};\n  var defaultStyle = defaultStyles(scaleFactor);\n  var themeStyles = assign({}, defaultStyle, otherStyles, rowStyles, colStyles);\n  return assign(themeStyles, cellInputStyles);\n}\nfunction _applyPlugin(jsPDF) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  jsPDF.API.autoTable = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var options;\n    if (args.length === 1) {\n      options = args[0];\n    } else {\n      console.error('Use of deprecated autoTable initiation');\n      options = args[2] || {};\n      options.columns = args[0];\n      options.body = args[1];\n    }\n    var input = parseInput(this, options);\n    var table = createTable(this, input);\n    drawTable(this, table);\n    return this;\n  };\n  // Assign false to enable `doc.lastAutoTable.finalY || 40` sugar\n  jsPDF.API.lastAutoTable = false;\n  jsPDF.API.previousAutoTable = false; // deprecated in v3\n  jsPDF.API.autoTable.previous = false; // deprecated in v3\n  jsPDF.API.autoTableText = function (text, x, y, styles) {\n    autoTableText(text, x, y, styles, this);\n  };\n  jsPDF.API.autoTableSetDefaults = function (defaults) {\n    DocHandler.setDefaults(defaults, this);\n    return this;\n  };\n  jsPDF.autoTableSetDefaults = function (defaults, doc) {\n    DocHandler.setDefaults(defaults, doc);\n  };\n  jsPDF.API.autoTableHtmlToJson = function (tableElem, includeHiddenElements) {\n    if (includeHiddenElements === void 0) {\n      includeHiddenElements = false;\n    }\n    if (typeof window === 'undefined') {\n      console.error('Cannot run autoTableHtmlToJson in non browser environment');\n      return null;\n    }\n    var doc = new DocHandler(this);\n    var _a = parseHtml(doc, tableElem, window, includeHiddenElements, false),\n      head = _a.head,\n      body = _a.body;\n    var columns = head[0].map(function (c) {\n      return c.content;\n    });\n    return {\n      columns: columns,\n      rows: body,\n      data: body\n    };\n  };\n  /**\n   * @deprecated\n   */\n  jsPDF.API.autoTableEndPosY = function () {\n    console.error('Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.');\n    var prev = this.lastAutoTable;\n    if (prev && prev.finalY) {\n      return prev.finalY;\n    } else {\n      return 0;\n    }\n  };\n  /**\n   * @deprecated\n   */\n  jsPDF.API.autoTableAddPageContent = function (hook) {\n    console.error('Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead.');\n    if (!jsPDF.API.autoTable.globalDefaults) {\n      jsPDF.API.autoTable.globalDefaults = {};\n    }\n    jsPDF.API.autoTable.globalDefaults.addPageContent = hook;\n    return this;\n  };\n  /**\n   * @deprecated\n   */\n  jsPDF.API.autoTableAddPage = function () {\n    console.error('Use of deprecated function: autoTableAddPage. Use doc.addPage()');\n    this.addPage();\n    return this;\n  };\n}\n\n// export { applyPlugin } didn't export applyPlugin\n// to index.d.ts for some reason\nfunction applyPlugin(jsPDF) {\n  _applyPlugin(jsPDF);\n}\nfunction autoTable(d, options) {\n  var input = parseInput(d, options);\n  var table = createTable(d, input);\n  drawTable(d, table);\n}\n// Experimental export\nfunction __createTable(d, options) {\n  var input = parseInput(d, options);\n  return createTable(d, input);\n}\nfunction __drawTable(d, table) {\n  drawTable(d, table);\n}\ntry {\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  var jsPDF = require('jspdf');\n  // Webpack imported jspdf instead of jsPDF for some reason\n  // while it seemed to work everywhere else.\n  if (jsPDF.jsPDF) jsPDF = jsPDF.jsPDF;\n  applyPlugin(jsPDF);\n} catch (error) {\n  // Importing jspdf in nodejs environments does not work as of jspdf\n  // 1.5.3 so we need to silence potential errors to support using for example\n  // the nodejs jspdf dist files with the exported applyPlugin\n}\nexport { Cell, CellHookData, Column, Row, Table, __createTable, __drawTable, applyPlugin, autoTable as default };","map":{"version":3,"names":["getStringWidth","text","styles","doc","applyStyles","textArr","Array","isArray","widestLineWidth","map","getTextWidth","reduce","a","b","Math","max","addTableBorder","table","startPos","cursor","lineWidth","settings","tableLineWidth","lineColor","tableLineColor","fillStyle","getFillStyle","rect","x","y","getWidth","pageSize","width","fillColor","drawLine","drawBackground","parseSpacing","value","defaultValue","_a","_b","_c","_d","length","top","right","bottom","left","vertical","horizontal","parseCss","supportedFonts","element","scaleFactor","style","window","result","pxScaleFactor","backgroundColor","parseColor","elem","getComputedStyle","textColor","borderColor","padding","parsePadding","cellPadding","bw","parseInt","borderTopWidth","accepted","indexOf","textAlign","halign","verticalAlign","valign","res","fontSize","isNaN","fontStyle","parseFontStyle","font","fontFamily","toLowerCase","fontWeight","styleGetter","cssColor","realColor","rgba","match","color","alpha","bg","parentElement","val","paddingTop","paddingRight","paddingBottom","paddingLeft","linePadding","lineHeight","inputPadding","n","extendStatics","d","Object","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","FONT_ROW_RATIO","HtmlRowInput","_super","_this","_element","defaultStyles","overflow","cellWidth","minCellHeight","minCellWidth","getTheme","name","themes","striped","head","body","foot","alternateRow","grid","plain","parseHtml","input","includeHiddenHtml","useCss","tableElement","document","querySelector","keys","getFontList","console","error","i","rows","tagName","row","parseRowContent","push","includeHidden","resultRow","cells","cell","style_1","display","cellStyles","rowSpan","colSpan","content","parseCellContent","orgCell","cloneNode","innerHTML","replace","split","part","trim","join","innerText","textContent","autoTableText","k","internal","getFontSize","splitRegex","splitText","lineCount","alignSize","iLine","getStringUnitWidth","maxWidth","align","globalDefaults","DocHandler","jsPDFDocument","userStyles","getTextColor","getFont","fontName","getLineWidth","getDrawColor","setDefaults","defaults","__autoTableDocumentDefaults","unifyColor","c","fontOnly","setFontStyle","availableFontStyles","setFont","setFontSize","setFillColor","apply","setTextColor","setDrawColor","setLineWidth","splitTextToSize","size","opts","height","getLastAutoTable","lastAutoTable","getDocument","setPage","page","addPage","getGlobalOptions","getDocumentOptions","getHeight","pageNumber","pageInfo","getCurrentPageInfo","getNumberOfPages","assign","target","s","s1","s2","s3","to","index","arguments","nextSource","nextKey","validateOptions","global","current","_loop_1","options","extendWidth","tableWidth","margins","margin","startY","didDrawPage","afterPageContent","beforePageContent","afterPageAdd","data","forEach","concat","deprecated","o","deprecatedOption","styleProp","checkStyles","columnStyles","_e","key","_i","rowHeight","columnWidth","parseInput","win","parseStyles","hooks","parseHooks","parseSettings","parseContent$1","id","tableId","gInput","dInput","cInput","styleOptions","headStyles","bodyStyles","footStyles","alternateRowStyles","prop","global_1","document_1","allOptions","didParseCell","willDrawCell","didDrawCell","allOptions_1","_f","_g","_h","_j","_k","_l","getStartY","showFoot","showHead","theme","horizontalPageBreak","horizontalPageBreakRepeat","pageBreak","rowPageBreak","userStartY","previous","sf","currentPage","isSamePageAsPreviousTable","startPageNumber","endingPage","finalY","html","hidden","htmlContent","columns","parseColumns","firstRow","filter","rowResult","dataKey","HookData","pageCount","CellHookData","column","section","Table","getHeadHeight","acc","getMaxCellHeight","getFootHeight","allRows","callCellHooks","handlers","handlers_1","handler","callEndPageHooks","pageWidth","wrappedWidth","total","col","Row","raw","spansMultiplePages","hasRowSpan","canEntireRowFit","getMinimumRowHeight","fontHeight","vPadding","oneRowHeight","Cell","contentHeight","contentWidth","minReadableWidth","minWidth","title","getTextPos","netHeight","netWidth","getContentHeight","Column","getMaxCustomCellWidth","getPageAvailableWidth","availablePageWidth","getColumnsCanFitInPage","config","remainingWidth","repeatColumn","cols","len","start","find","item","colWidth","colIndexes","lastIndex","calculateAllColumnsCanFitInPage","allResults","TablePrinter","drawTable","jsPDFDoc","sectionsHeight","minTableBottomPos","tableHeight","nextPage","printTableWithHorizontalPageBreak","printRow","isLastRow","printFullRow","previousAutoTable","autoTable","allColumnsCanFitResult","colsAndIndexes","printHead","printBody","printFoot","getRemainingLineCount","remainingPageSpace","remainingLines","floor","modifyRowToFit","remainderCell","remainingLineCount","splice","remainderRow","shouldPrintOnCurrentPage","pageHeight","marginHeight","maxRowHeight","minRowHeight","minRowFits","rowHasRowSpanCell","rowHigherThanPage","remainingSpace","getRemainingPageSpace","columns_1","drawCellBorders","textPos","ceil","getFillColor","sides","lineWidth_1","side","drawBorderForSide","x1","y1","x2","y2","line","bottomContentHeight","newCurrent","calculateWidths","calculate","resizableColumns","initialTableWidth","customWidth","resizeWidth","resizeColumns","abs","round","applyColSpans","fitContent","applyRowSpans","longestWordWidth","defaultMinWidth","getMinWidth","initialResizeWidth","sumWrappedWidth","ratio","suggestedChange","suggestedWidth","newWidth","rowSpanCells","colRowSpansLeft","all","rowIndex","remaining","colSpanCell","combinedColSpanWidth","colSpansLeft","columnIndex","rowSpanHeight","count","textSpace","ellipsize","realContentHeight","str","ellipsizeStr","precision","substring","createTable","parseContent","createColumns","sectionRow","generateSectionRow","parseSection","sectionName","sectionRows","styleProps","rowSpansLeftForColumn","rawRow","skippedRowForRowSpans","colSpansAdded","columnSpansLeft","rawCell","cellInputStyles","times","getSectionTitle","header","footer","themeName","sectionStyles","otherStyles","colStyles","rowStyles","defaultStyle","themeStyles","_applyPlugin","jsPDF","API","args","autoTableSetDefaults","autoTableHtmlToJson","tableElem","includeHiddenElements","autoTableEndPosY","prev","autoTableAddPageContent","hook","addPageContent","autoTableAddPage","applyPlugin","__createTable","__drawTable","require","default"],"sources":["C:/Users/ADMIN/Desktop/crackerfrontend/gcrackers/node_modules/jspdf-autotable/dist/jspdf.plugin.autotable.mjs"],"sourcesContent":["function getStringWidth(text, styles, doc) {\n    doc.applyStyles(styles, true);\n    var textArr = Array.isArray(text) ? text : [text];\n    var widestLineWidth = textArr\n        .map(function (text) { return doc.getTextWidth(text); })\n        .reduce(function (a, b) { return Math.max(a, b); }, 0);\n    return widestLineWidth;\n}\nfunction addTableBorder(doc, table, startPos, cursor) {\n    var lineWidth = table.settings.tableLineWidth;\n    var lineColor = table.settings.tableLineColor;\n    doc.applyStyles({ lineWidth: lineWidth, lineColor: lineColor });\n    var fillStyle = getFillStyle(lineWidth, false);\n    if (fillStyle) {\n        doc.rect(startPos.x, startPos.y, table.getWidth(doc.pageSize().width), cursor.y - startPos.y, fillStyle);\n    }\n}\nfunction getFillStyle(lineWidth, fillColor) {\n    var drawLine = lineWidth > 0;\n    var drawBackground = fillColor || fillColor === 0;\n    if (drawLine && drawBackground) {\n        return 'DF'; // Fill then stroke\n    }\n    else if (drawLine) {\n        return 'S'; // Only stroke (transparent background)\n    }\n    else if (drawBackground) {\n        return 'F'; // Only fill, no stroke\n    }\n    else {\n        return null;\n    }\n}\nfunction parseSpacing(value, defaultValue) {\n    var _a, _b, _c, _d;\n    value = value || defaultValue;\n    if (Array.isArray(value)) {\n        if (value.length >= 4) {\n            return {\n                top: value[0],\n                right: value[1],\n                bottom: value[2],\n                left: value[3],\n            };\n        }\n        else if (value.length === 3) {\n            return {\n                top: value[0],\n                right: value[1],\n                bottom: value[2],\n                left: value[1],\n            };\n        }\n        else if (value.length === 2) {\n            return {\n                top: value[0],\n                right: value[1],\n                bottom: value[0],\n                left: value[1],\n            };\n        }\n        else if (value.length === 1) {\n            value = value[0];\n        }\n        else {\n            value = defaultValue;\n        }\n    }\n    if (typeof value === 'object') {\n        if (typeof value.vertical === 'number') {\n            value.top = value.vertical;\n            value.bottom = value.vertical;\n        }\n        if (typeof value.horizontal === 'number') {\n            value.right = value.horizontal;\n            value.left = value.horizontal;\n        }\n        return {\n            left: (_a = value.left) !== null && _a !== void 0 ? _a : defaultValue,\n            top: (_b = value.top) !== null && _b !== void 0 ? _b : defaultValue,\n            right: (_c = value.right) !== null && _c !== void 0 ? _c : defaultValue,\n            bottom: (_d = value.bottom) !== null && _d !== void 0 ? _d : defaultValue,\n        };\n    }\n    if (typeof value !== 'number') {\n        value = defaultValue;\n    }\n    return { top: value, right: value, bottom: value, left: value };\n}\n\n// Limitations\nfunction parseCss(supportedFonts, element, scaleFactor, style, window) {\n    var result = {};\n    var pxScaleFactor = 96 / 72;\n    var backgroundColor = parseColor(element, function (elem) {\n        return window.getComputedStyle(elem)['backgroundColor'];\n    });\n    if (backgroundColor != null)\n        result.fillColor = backgroundColor;\n    var textColor = parseColor(element, function (elem) {\n        return window.getComputedStyle(elem)['color'];\n    });\n    if (textColor != null)\n        result.textColor = textColor;\n    var borderColor = parseColor(element, function (elem) {\n        return window.getComputedStyle(elem)['borderTopColor'];\n    });\n    if (borderColor != null)\n        result.lineColor = borderColor;\n    var padding = parsePadding(style, scaleFactor);\n    if (padding)\n        result.cellPadding = padding;\n    // style.borderWidth only works in chrome (borderTopWidth etc works in firefox and ie as well)\n    var bw = parseInt(style.borderTopWidth || '');\n    bw = bw / pxScaleFactor / scaleFactor;\n    if (bw)\n        result.lineWidth = bw;\n    var accepted = ['left', 'right', 'center', 'justify'];\n    if (accepted.indexOf(style.textAlign) !== -1) {\n        result.halign = style.textAlign;\n    }\n    accepted = ['middle', 'bottom', 'top'];\n    if (accepted.indexOf(style.verticalAlign) !== -1) {\n        result.valign = style.verticalAlign;\n    }\n    var res = parseInt(style.fontSize || '');\n    if (!isNaN(res))\n        result.fontSize = res / pxScaleFactor;\n    var fontStyle = parseFontStyle(style);\n    if (fontStyle)\n        result.fontStyle = fontStyle;\n    var font = (style.fontFamily || '').toLowerCase();\n    if (supportedFonts.indexOf(font) !== -1) {\n        result.font = font;\n    }\n    return result;\n}\nfunction parseFontStyle(style) {\n    var res = '';\n    if (style.fontWeight === 'bold' ||\n        style.fontWeight === 'bolder' ||\n        parseInt(style.fontWeight) >= 700) {\n        res = 'bold';\n    }\n    if (style.fontStyle === 'italic' || style.fontStyle === 'oblique') {\n        res += 'italic';\n    }\n    return res;\n}\nfunction parseColor(element, styleGetter) {\n    var cssColor = realColor(element, styleGetter);\n    if (!cssColor)\n        return null;\n    var rgba = cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d*\\.?\\d*))?\\)$/);\n    if (!rgba || !Array.isArray(rgba)) {\n        return null;\n    }\n    var color = [\n        parseInt(rgba[1]),\n        parseInt(rgba[2]),\n        parseInt(rgba[3]),\n    ];\n    var alpha = parseInt(rgba[4]);\n    if (alpha === 0 || isNaN(color[0]) || isNaN(color[1]) || isNaN(color[2])) {\n        return null;\n    }\n    return color;\n}\nfunction realColor(elem, styleGetter) {\n    var bg = styleGetter(elem);\n    if (bg === 'rgba(0, 0, 0, 0)' ||\n        bg === 'transparent' ||\n        bg === 'initial' ||\n        bg === 'inherit') {\n        if (elem.parentElement == null) {\n            return null;\n        }\n        return realColor(elem.parentElement, styleGetter);\n    }\n    else {\n        return bg;\n    }\n}\nfunction parsePadding(style, scaleFactor) {\n    var val = [\n        style.paddingTop,\n        style.paddingRight,\n        style.paddingBottom,\n        style.paddingLeft,\n    ];\n    var pxScaleFactor = 96 / (72 / scaleFactor);\n    var linePadding = (parseInt(style.lineHeight) - parseInt(style.fontSize)) / scaleFactor / 2;\n    var inputPadding = val.map(function (n) {\n        return parseInt(n || '0') / pxScaleFactor;\n    });\n    var padding = parseSpacing(inputPadding, 0);\n    if (linePadding > padding.top) {\n        padding.top = linePadding;\n    }\n    if (linePadding > padding.bottom) {\n        padding.bottom = linePadding;\n    }\n    return padding;\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\n/**\n * Ratio between font size and font height. The number comes from jspdf's source code\n */\nvar FONT_ROW_RATIO = 1.15;\nvar HtmlRowInput = /** @class */ (function (_super) {\n    __extends(HtmlRowInput, _super);\n    function HtmlRowInput(element) {\n        var _this = _super.call(this) || this;\n        _this._element = element;\n        return _this;\n    }\n    return HtmlRowInput;\n}(Array));\n// Base style for all themes\nfunction defaultStyles(scaleFactor) {\n    return {\n        font: 'helvetica',\n        fontStyle: 'normal',\n        overflow: 'linebreak',\n        fillColor: false,\n        textColor: 20,\n        halign: 'left',\n        valign: 'top',\n        fontSize: 10,\n        cellPadding: 5 / scaleFactor,\n        lineColor: 200,\n        lineWidth: 0,\n        cellWidth: 'auto',\n        minCellHeight: 0,\n        minCellWidth: 0,\n    };\n}\nfunction getTheme(name) {\n    var themes = {\n        striped: {\n            table: { fillColor: 255, textColor: 80, fontStyle: 'normal' },\n            head: { textColor: 255, fillColor: [41, 128, 185], fontStyle: 'bold' },\n            body: {},\n            foot: { textColor: 255, fillColor: [41, 128, 185], fontStyle: 'bold' },\n            alternateRow: { fillColor: 245 },\n        },\n        grid: {\n            table: {\n                fillColor: 255,\n                textColor: 80,\n                fontStyle: 'normal',\n                lineWidth: 0.1,\n            },\n            head: {\n                textColor: 255,\n                fillColor: [26, 188, 156],\n                fontStyle: 'bold',\n                lineWidth: 0,\n            },\n            body: {},\n            foot: {\n                textColor: 255,\n                fillColor: [26, 188, 156],\n                fontStyle: 'bold',\n                lineWidth: 0,\n            },\n            alternateRow: {},\n        },\n        plain: {\n            head: { fontStyle: 'bold' },\n            foot: { fontStyle: 'bold' },\n        },\n    };\n    return themes[name];\n}\n\nfunction parseHtml(doc, input, window, includeHiddenHtml, useCss) {\n    var _a, _b;\n    if (includeHiddenHtml === void 0) { includeHiddenHtml = false; }\n    if (useCss === void 0) { useCss = false; }\n    var tableElement;\n    if (typeof input === 'string') {\n        tableElement = window.document.querySelector(input);\n    }\n    else {\n        tableElement = input;\n    }\n    var supportedFonts = Object.keys(doc.getFontList());\n    var scaleFactor = doc.scaleFactor();\n    var head = [], body = [], foot = [];\n    if (!tableElement) {\n        console.error('Html table could not be found with input: ', input);\n        return { head: head, body: body, foot: foot };\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var element = tableElement.rows[i];\n        var tagName = (_b = (_a = element === null || element === void 0 ? void 0 : element.parentElement) === null || _a === void 0 ? void 0 : _a.tagName) === null || _b === void 0 ? void 0 : _b.toLowerCase();\n        var row = parseRowContent(supportedFonts, scaleFactor, window, element, includeHiddenHtml, useCss);\n        if (!row)\n            continue;\n        if (tagName === 'thead') {\n            head.push(row);\n        }\n        else if (tagName === 'tfoot') {\n            foot.push(row);\n        }\n        else {\n            // Add to body both if parent is tbody or table\n            body.push(row);\n        }\n    }\n    return { head: head, body: body, foot: foot };\n}\nfunction parseRowContent(supportedFonts, scaleFactor, window, row, includeHidden, useCss) {\n    var resultRow = new HtmlRowInput(row);\n    for (var i = 0; i < row.cells.length; i++) {\n        var cell = row.cells[i];\n        var style_1 = window.getComputedStyle(cell);\n        if (includeHidden || style_1.display !== 'none') {\n            var cellStyles = void 0;\n            if (useCss) {\n                cellStyles = parseCss(supportedFonts, cell, scaleFactor, style_1, window);\n            }\n            resultRow.push({\n                rowSpan: cell.rowSpan,\n                colSpan: cell.colSpan,\n                styles: cellStyles,\n                _element: cell,\n                content: parseCellContent(cell),\n            });\n        }\n    }\n    var style = window.getComputedStyle(row);\n    if (resultRow.length > 0 && (includeHidden || style.display !== 'none')) {\n        return resultRow;\n    }\n}\nfunction parseCellContent(orgCell) {\n    // Work on cloned node to make sure no changes are applied to html table\n    var cell = orgCell.cloneNode(true);\n    // Remove extra space and line breaks in markup to make it more similar to\n    // what would be shown in html\n    cell.innerHTML = cell.innerHTML.replace(/\\n/g, '').replace(/ +/g, ' ');\n    // Preserve <br> tags as line breaks in the pdf\n    cell.innerHTML = cell.innerHTML\n        .split(/\\<br.*?\\>/) //start with '<br' and ends with '>'.\n        .map(function (part) { return part.trim(); })\n        .join('\\n');\n    // innerText for ie\n    return cell.innerText || cell.textContent || '';\n}\n\n/**\n * Improved text function with halign and valign support\n * Inspiration from: http://stackoverflow.com/questions/28327510/align-text-right-using-jspdf/28433113#28433113\n */\nfunction autoTableText (text, x, y, styles, doc) {\n    styles = styles || {};\n    var FONT_ROW_RATIO = 1.15;\n    var k = doc.internal.scaleFactor;\n    var fontSize = doc.internal.getFontSize() / k;\n    var splitRegex = /\\r\\n|\\r|\\n/g;\n    var splitText = '';\n    var lineCount = 1;\n    if (styles.valign === 'middle' ||\n        styles.valign === 'bottom' ||\n        styles.halign === 'center' ||\n        styles.halign === 'right') {\n        splitText = typeof text === 'string' ? text.split(splitRegex) : text;\n        lineCount = splitText.length || 1;\n    }\n    // Align the top\n    y += fontSize * (2 - FONT_ROW_RATIO);\n    if (styles.valign === 'middle')\n        y -= (lineCount / 2) * fontSize * FONT_ROW_RATIO;\n    else if (styles.valign === 'bottom')\n        y -= lineCount * fontSize * FONT_ROW_RATIO;\n    if (styles.halign === 'center' || styles.halign === 'right') {\n        var alignSize = fontSize;\n        if (styles.halign === 'center')\n            alignSize *= 0.5;\n        if (splitText && lineCount >= 1) {\n            for (var iLine = 0; iLine < splitText.length; iLine++) {\n                doc.text(splitText[iLine], x - doc.getStringUnitWidth(splitText[iLine]) * alignSize, y);\n                y += fontSize * FONT_ROW_RATIO;\n            }\n            return doc;\n        }\n        x -= doc.getStringUnitWidth(text) * alignSize;\n    }\n    if (styles.halign === 'justify') {\n        doc.text(text, x, y, {\n            maxWidth: styles.maxWidth || 100,\n            align: 'justify',\n        });\n    }\n    else {\n        doc.text(text, x, y);\n    }\n    return doc;\n}\n\nvar globalDefaults = {};\nvar DocHandler = /** @class */ (function () {\n    function DocHandler(jsPDFDocument) {\n        this.jsPDFDocument = jsPDFDocument;\n        this.userStyles = {\n            // Black for versions of jspdf without getTextColor\n            textColor: jsPDFDocument.getTextColor\n                ? this.jsPDFDocument.getTextColor()\n                : 0,\n            fontSize: jsPDFDocument.internal.getFontSize(),\n            fontStyle: jsPDFDocument.internal.getFont().fontStyle,\n            font: jsPDFDocument.internal.getFont().fontName,\n            // 0 for versions of jspdf without getLineWidth\n            lineWidth: jsPDFDocument.getLineWidth\n                ? this.jsPDFDocument.getLineWidth()\n                : 0,\n            // Black for versions of jspdf without getDrawColor\n            lineColor: jsPDFDocument.getDrawColor\n                ? this.jsPDFDocument.getDrawColor()\n                : 0,\n        };\n    }\n    DocHandler.setDefaults = function (defaults, doc) {\n        if (doc === void 0) { doc = null; }\n        if (doc) {\n            doc.__autoTableDocumentDefaults = defaults;\n        }\n        else {\n            globalDefaults = defaults;\n        }\n    };\n    DocHandler.unifyColor = function (c) {\n        if (Array.isArray(c)) {\n            return c;\n        }\n        else if (typeof c === 'number') {\n            return [c, c, c];\n        }\n        else if (typeof c === 'string') {\n            return [c];\n        }\n        else {\n            return null;\n        }\n    };\n    DocHandler.prototype.applyStyles = function (styles, fontOnly) {\n        // Font style needs to be applied before font\n        // https://github.com/simonbengtsson/jsPDF-AutoTable/issues/632\n        var _a, _b, _c;\n        if (fontOnly === void 0) { fontOnly = false; }\n        if (styles.fontStyle)\n            this.jsPDFDocument.setFontStyle &&\n                this.jsPDFDocument.setFontStyle(styles.fontStyle);\n        var _d = this.jsPDFDocument.internal.getFont(), fontStyle = _d.fontStyle, fontName = _d.fontName;\n        if (styles.font)\n            fontName = styles.font;\n        if (styles.fontStyle) {\n            fontStyle = styles.fontStyle;\n            var availableFontStyles = this.getFontList()[fontName];\n            if (availableFontStyles &&\n                availableFontStyles.indexOf(fontStyle) === -1) {\n                // Common issue was that the default bold in headers\n                // made custom fonts not work. For example:\n                // https://github.com/simonbengtsson/jsPDF-AutoTable/issues/653\n                this.jsPDFDocument.setFontStyle &&\n                    this.jsPDFDocument.setFontStyle(availableFontStyles[0]);\n                fontStyle = availableFontStyles[0];\n            }\n        }\n        this.jsPDFDocument.setFont(fontName, fontStyle);\n        if (styles.fontSize)\n            this.jsPDFDocument.setFontSize(styles.fontSize);\n        if (fontOnly) {\n            return; // Performance improvement\n        }\n        var color = DocHandler.unifyColor(styles.fillColor);\n        if (color)\n            (_a = this.jsPDFDocument).setFillColor.apply(_a, color);\n        color = DocHandler.unifyColor(styles.textColor);\n        if (color)\n            (_b = this.jsPDFDocument).setTextColor.apply(_b, color);\n        color = DocHandler.unifyColor(styles.lineColor);\n        if (color)\n            (_c = this.jsPDFDocument).setDrawColor.apply(_c, color);\n        if (typeof styles.lineWidth === 'number') {\n            this.jsPDFDocument.setLineWidth(styles.lineWidth);\n        }\n    };\n    DocHandler.prototype.splitTextToSize = function (text, size, opts) {\n        return this.jsPDFDocument.splitTextToSize(text, size, opts);\n    };\n    DocHandler.prototype.rect = function (x, y, width, height, fillStyle) {\n        return this.jsPDFDocument.rect(x, y, width, height, fillStyle);\n    };\n    DocHandler.prototype.getLastAutoTable = function () {\n        return this.jsPDFDocument.lastAutoTable || null;\n    };\n    DocHandler.prototype.getTextWidth = function (text) {\n        return this.jsPDFDocument.getTextWidth(text);\n    };\n    DocHandler.prototype.getDocument = function () {\n        return this.jsPDFDocument;\n    };\n    DocHandler.prototype.setPage = function (page) {\n        this.jsPDFDocument.setPage(page);\n    };\n    DocHandler.prototype.addPage = function () {\n        return this.jsPDFDocument.addPage();\n    };\n    DocHandler.prototype.getFontList = function () {\n        return this.jsPDFDocument.getFontList();\n    };\n    DocHandler.prototype.getGlobalOptions = function () {\n        return globalDefaults || {};\n    };\n    DocHandler.prototype.getDocumentOptions = function () {\n        return this.jsPDFDocument.__autoTableDocumentDefaults || {};\n    };\n    DocHandler.prototype.pageSize = function () {\n        var pageSize = this.jsPDFDocument.internal.pageSize;\n        // JSPDF 1.4 uses get functions instead of properties on pageSize\n        if (pageSize.width == null) {\n            pageSize = {\n                width: pageSize.getWidth(),\n                height: pageSize.getHeight(),\n            };\n        }\n        return pageSize;\n    };\n    DocHandler.prototype.scaleFactor = function () {\n        return this.jsPDFDocument.internal.scaleFactor;\n    };\n    DocHandler.prototype.pageNumber = function () {\n        var pageInfo = this.jsPDFDocument.internal.getCurrentPageInfo();\n        if (!pageInfo) {\n            // Only recent versions of jspdf has pageInfo\n            return this.jsPDFDocument.internal.getNumberOfPages();\n        }\n        return pageInfo.pageNumber;\n    };\n    return DocHandler;\n}());\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\nfunction assign(target, s, s1, s2, s3) {\n    if (target == null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n    var to = Object(target);\n    for (var index = 1; index < arguments.length; index++) {\n        // eslint-disable-next-line prefer-rest-params\n        var nextSource = arguments[index];\n        if (nextSource != null) {\n            // Skip over if undefined or null\n            for (var nextKey in nextSource) {\n                // Avoid bugs when hasOwnProperty is shadowed\n                if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                    to[nextKey] = nextSource[nextKey];\n                }\n            }\n        }\n    }\n    return to;\n}\n\nfunction validateOptions (doc, global, document, current) {\n    var _loop_1 = function (options) {\n        if (options && typeof options !== 'object') {\n            console.error('The options parameter should be of type object, is: ' + typeof options);\n        }\n        if (typeof options.extendWidth !== 'undefined') {\n            options.tableWidth = options.extendWidth ? 'auto' : 'wrap';\n            console.error('Use of deprecated option: extendWidth, use tableWidth instead.');\n        }\n        if (typeof options.margins !== 'undefined') {\n            if (typeof options.margin === 'undefined')\n                options.margin = options.margins;\n            console.error('Use of deprecated option: margins, use margin instead.');\n        }\n        if (options.startY && typeof options.startY !== 'number') {\n            console.error('Invalid value for startY option', options.startY);\n            delete options.startY;\n        }\n        if (!options.didDrawPage &&\n            (options.afterPageContent ||\n                options.beforePageContent ||\n                options.afterPageAdd)) {\n            console.error('The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead');\n            options.didDrawPage = function (data) {\n                doc.applyStyles(doc.userStyles);\n                if (options.beforePageContent)\n                    options.beforePageContent(data);\n                doc.applyStyles(doc.userStyles);\n                if (options.afterPageContent)\n                    options.afterPageContent(data);\n                doc.applyStyles(doc.userStyles);\n                if (options.afterPageAdd && data.pageNumber > 1) {\n                    data.afterPageAdd(data);\n                }\n                doc.applyStyles(doc.userStyles);\n            };\n        }\n        [\n            'createdHeaderCell',\n            'drawHeaderRow',\n            'drawRow',\n            'drawHeaderCell',\n        ].forEach(function (name) {\n            if (options[name]) {\n                console.error(\"The \\\"\".concat(name, \"\\\" hook has changed in version 3.0, check the changelog for how to migrate.\"));\n            }\n        });\n        [\n            ['showFoot', 'showFooter'],\n            ['showHead', 'showHeader'],\n            ['didDrawPage', 'addPageContent'],\n            ['didParseCell', 'createdCell'],\n            ['headStyles', 'headerStyles'],\n        ].forEach(function (_a) {\n            var current = _a[0], deprecated = _a[1];\n            if (options[deprecated]) {\n                console.error(\"Use of deprecated option \".concat(deprecated, \". Use \").concat(current, \" instead\"));\n                options[current] = options[deprecated];\n            }\n        });\n        [\n            ['padding', 'cellPadding'],\n            ['lineHeight', 'rowHeight'],\n            'fontSize',\n            'overflow',\n        ].forEach(function (o) {\n            var deprecatedOption = typeof o === 'string' ? o : o[0];\n            var style = typeof o === 'string' ? o : o[1];\n            if (typeof options[deprecatedOption] !== 'undefined') {\n                if (typeof options.styles[style] === 'undefined') {\n                    options.styles[style] = options[deprecatedOption];\n                }\n                console.error('Use of deprecated option: ' +\n                    deprecatedOption +\n                    ', use the style ' +\n                    style +\n                    ' instead.');\n            }\n        });\n        for (var _b = 0, _c = [\n            'styles',\n            'bodyStyles',\n            'headStyles',\n            'footStyles',\n        ]; _b < _c.length; _b++) {\n            var styleProp = _c[_b];\n            checkStyles(options[styleProp] || {});\n        }\n        var columnStyles = options['columnStyles'] || {};\n        for (var _d = 0, _e = Object.keys(columnStyles); _d < _e.length; _d++) {\n            var key = _e[_d];\n            checkStyles(columnStyles[key] || {});\n        }\n    };\n    for (var _i = 0, _a = [global, document, current]; _i < _a.length; _i++) {\n        var options = _a[_i];\n        _loop_1(options);\n    }\n}\nfunction checkStyles(styles) {\n    if (styles.rowHeight) {\n        console.error('Use of deprecated style rowHeight. It is renamed to minCellHeight.');\n        if (!styles.minCellHeight) {\n            styles.minCellHeight = styles.rowHeight;\n        }\n    }\n    else if (styles.columnWidth) {\n        console.error('Use of deprecated style columnWidth. It is renamed to cellWidth.');\n        if (!styles.cellWidth) {\n            styles.cellWidth = styles.columnWidth;\n        }\n    }\n}\n\nfunction parseInput(d, current) {\n    var doc = new DocHandler(d);\n    var document = doc.getDocumentOptions();\n    var global = doc.getGlobalOptions();\n    validateOptions(doc, global, document, current);\n    var options = assign({}, global, document, current);\n    var win;\n    if (typeof window !== 'undefined') {\n        win = window;\n    }\n    var styles = parseStyles(global, document, current);\n    var hooks = parseHooks(global, document, current);\n    var settings = parseSettings(doc, options);\n    var content = parseContent$1(doc, options, win);\n    return {\n        id: current.tableId,\n        content: content,\n        hooks: hooks,\n        styles: styles,\n        settings: settings,\n    };\n}\nfunction parseStyles(gInput, dInput, cInput) {\n    var styleOptions = {\n        styles: {},\n        headStyles: {},\n        bodyStyles: {},\n        footStyles: {},\n        alternateRowStyles: {},\n        columnStyles: {},\n    };\n    var _loop_1 = function (prop) {\n        if (prop === 'columnStyles') {\n            var global_1 = gInput[prop];\n            var document_1 = dInput[prop];\n            var current = cInput[prop];\n            styleOptions.columnStyles = assign({}, global_1, document_1, current);\n        }\n        else {\n            var allOptions = [gInput, dInput, cInput];\n            var styles = allOptions.map(function (opts) { return opts[prop] || {}; });\n            styleOptions[prop] = assign({}, styles[0], styles[1], styles[2]);\n        }\n    };\n    for (var _i = 0, _a = Object.keys(styleOptions); _i < _a.length; _i++) {\n        var prop = _a[_i];\n        _loop_1(prop);\n    }\n    return styleOptions;\n}\nfunction parseHooks(global, document, current) {\n    var allOptions = [global, document, current];\n    var result = {\n        didParseCell: [],\n        willDrawCell: [],\n        didDrawCell: [],\n        didDrawPage: [],\n    };\n    for (var _i = 0, allOptions_1 = allOptions; _i < allOptions_1.length; _i++) {\n        var options = allOptions_1[_i];\n        if (options.didParseCell)\n            result.didParseCell.push(options.didParseCell);\n        if (options.willDrawCell)\n            result.willDrawCell.push(options.willDrawCell);\n        if (options.didDrawCell)\n            result.didDrawCell.push(options.didDrawCell);\n        if (options.didDrawPage)\n            result.didDrawPage.push(options.didDrawPage);\n    }\n    return result;\n}\nfunction parseSettings(doc, options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n    var margin = parseSpacing(options.margin, 40 / doc.scaleFactor());\n    var startY = (_a = getStartY(doc, options.startY)) !== null && _a !== void 0 ? _a : margin.top;\n    var showFoot;\n    if (options.showFoot === true) {\n        showFoot = 'everyPage';\n    }\n    else if (options.showFoot === false) {\n        showFoot = 'never';\n    }\n    else {\n        showFoot = (_b = options.showFoot) !== null && _b !== void 0 ? _b : 'everyPage';\n    }\n    var showHead;\n    if (options.showHead === true) {\n        showHead = 'everyPage';\n    }\n    else if (options.showHead === false) {\n        showHead = 'never';\n    }\n    else {\n        showHead = (_c = options.showHead) !== null && _c !== void 0 ? _c : 'everyPage';\n    }\n    var useCss = (_d = options.useCss) !== null && _d !== void 0 ? _d : false;\n    var theme = options.theme || (useCss ? 'plain' : 'striped');\n    var horizontalPageBreak = options.horizontalPageBreak\n        ? true\n        : false;\n    var horizontalPageBreakRepeat = (_e = options.horizontalPageBreakRepeat) !== null && _e !== void 0 ? _e : null;\n    return {\n        includeHiddenHtml: (_f = options.includeHiddenHtml) !== null && _f !== void 0 ? _f : false,\n        useCss: useCss,\n        theme: theme,\n        startY: startY,\n        margin: margin,\n        pageBreak: (_g = options.pageBreak) !== null && _g !== void 0 ? _g : 'auto',\n        rowPageBreak: (_h = options.rowPageBreak) !== null && _h !== void 0 ? _h : 'auto',\n        tableWidth: (_j = options.tableWidth) !== null && _j !== void 0 ? _j : 'auto',\n        showHead: showHead,\n        showFoot: showFoot,\n        tableLineWidth: (_k = options.tableLineWidth) !== null && _k !== void 0 ? _k : 0,\n        tableLineColor: (_l = options.tableLineColor) !== null && _l !== void 0 ? _l : 200,\n        horizontalPageBreak: horizontalPageBreak,\n        horizontalPageBreakRepeat: horizontalPageBreakRepeat,\n    };\n}\nfunction getStartY(doc, userStartY) {\n    var previous = doc.getLastAutoTable();\n    var sf = doc.scaleFactor();\n    var currentPage = doc.pageNumber();\n    var isSamePageAsPreviousTable = false;\n    if (previous && previous.startPageNumber) {\n        var endingPage = previous.startPageNumber + previous.pageNumber - 1;\n        isSamePageAsPreviousTable = endingPage === currentPage;\n    }\n    if (typeof userStartY === 'number') {\n        return userStartY;\n    }\n    else if (userStartY == null || userStartY === false) {\n        if (isSamePageAsPreviousTable && (previous === null || previous === void 0 ? void 0 : previous.finalY) != null) {\n            // Some users had issues with overlapping tables when they used multiple\n            // tables without setting startY so setting it here to a sensible default.\n            return previous.finalY + 20 / sf;\n        }\n    }\n    return null;\n}\nfunction parseContent$1(doc, options, window) {\n    var head = options.head || [];\n    var body = options.body || [];\n    var foot = options.foot || [];\n    if (options.html) {\n        var hidden = options.includeHiddenHtml;\n        if (window) {\n            var htmlContent = parseHtml(doc, options.html, window, hidden, options.useCss) || {};\n            head = htmlContent.head || head;\n            body = htmlContent.body || head;\n            foot = htmlContent.foot || head;\n        }\n        else {\n            console.error('Cannot parse html in non browser environment');\n        }\n    }\n    var columns = options.columns || parseColumns(head, body, foot);\n    return {\n        columns: columns,\n        head: head,\n        body: body,\n        foot: foot,\n    };\n}\nfunction parseColumns(head, body, foot) {\n    var firstRow = head[0] || body[0] || foot[0] || [];\n    var result = [];\n    Object.keys(firstRow)\n        .filter(function (key) { return key !== '_element'; })\n        .forEach(function (key) {\n        var colSpan = 1;\n        var input;\n        if (Array.isArray(firstRow)) {\n            input = firstRow[parseInt(key)];\n        }\n        else {\n            input = firstRow[key];\n        }\n        if (typeof input === 'object' && !Array.isArray(input)) {\n            colSpan = (input === null || input === void 0 ? void 0 : input.colSpan) || 1;\n        }\n        for (var i = 0; i < colSpan; i++) {\n            var id = void 0;\n            if (Array.isArray(firstRow)) {\n                id = result.length;\n            }\n            else {\n                id = key + (i > 0 ? \"_\".concat(i) : '');\n            }\n            var rowResult = { dataKey: id };\n            result.push(rowResult);\n        }\n    });\n    return result;\n}\n\nvar HookData = /** @class */ (function () {\n    function HookData(doc, table, cursor) {\n        this.table = table;\n        this.pageNumber = table.pageNumber;\n        this.pageCount = this.pageNumber;\n        this.settings = table.settings;\n        this.cursor = cursor;\n        this.doc = doc.getDocument();\n    }\n    return HookData;\n}());\nvar CellHookData = /** @class */ (function (_super) {\n    __extends(CellHookData, _super);\n    function CellHookData(doc, table, cell, row, column, cursor) {\n        var _this = _super.call(this, doc, table, cursor) || this;\n        _this.cell = cell;\n        _this.row = row;\n        _this.column = column;\n        _this.section = row.section;\n        return _this;\n    }\n    return CellHookData;\n}(HookData));\n\nvar Table = /** @class */ (function () {\n    function Table(input, content) {\n        this.pageNumber = 1;\n        // Deprecated, use pageNumber instead\n        // Not using getter since:\n        // https://github.com/simonbengtsson/jsPDF-AutoTable/issues/596\n        this.pageCount = 1;\n        this.id = input.id;\n        this.settings = input.settings;\n        this.styles = input.styles;\n        this.hooks = input.hooks;\n        this.columns = content.columns;\n        this.head = content.head;\n        this.body = content.body;\n        this.foot = content.foot;\n    }\n    Table.prototype.getHeadHeight = function (columns) {\n        return this.head.reduce(function (acc, row) { return acc + row.getMaxCellHeight(columns); }, 0);\n    };\n    Table.prototype.getFootHeight = function (columns) {\n        return this.foot.reduce(function (acc, row) { return acc + row.getMaxCellHeight(columns); }, 0);\n    };\n    Table.prototype.allRows = function () {\n        return this.head.concat(this.body).concat(this.foot);\n    };\n    Table.prototype.callCellHooks = function (doc, handlers, cell, row, column, cursor) {\n        for (var _i = 0, handlers_1 = handlers; _i < handlers_1.length; _i++) {\n            var handler = handlers_1[_i];\n            var data = new CellHookData(doc, this, cell, row, column, cursor);\n            var result = handler(data) === false;\n            // Make sure text is always string[] since user can assign string\n            cell.text = Array.isArray(cell.text) ? cell.text : [cell.text];\n            if (result) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Table.prototype.callEndPageHooks = function (doc, cursor) {\n        doc.applyStyles(doc.userStyles);\n        for (var _i = 0, _a = this.hooks.didDrawPage; _i < _a.length; _i++) {\n            var handler = _a[_i];\n            handler(new HookData(doc, this, cursor));\n        }\n    };\n    Table.prototype.getWidth = function (pageWidth) {\n        if (typeof this.settings.tableWidth === 'number') {\n            return this.settings.tableWidth;\n        }\n        else if (this.settings.tableWidth === 'wrap') {\n            var wrappedWidth = this.columns.reduce(function (total, col) { return total + col.wrappedWidth; }, 0);\n            return wrappedWidth;\n        }\n        else {\n            var margin = this.settings.margin;\n            return pageWidth - margin.left - margin.right;\n        }\n    };\n    return Table;\n}());\nvar Row = /** @class */ (function () {\n    function Row(raw, index, section, cells, spansMultiplePages) {\n        if (spansMultiplePages === void 0) { spansMultiplePages = false; }\n        this.height = 0;\n        this.raw = raw;\n        if (raw instanceof HtmlRowInput) {\n            this.raw = raw._element;\n            this.element = raw._element;\n        }\n        this.index = index;\n        this.section = section;\n        this.cells = cells;\n        this.spansMultiplePages = spansMultiplePages;\n    }\n    Row.prototype.getMaxCellHeight = function (columns) {\n        var _this = this;\n        return columns.reduce(function (acc, column) { var _a; return Math.max(acc, ((_a = _this.cells[column.index]) === null || _a === void 0 ? void 0 : _a.height) || 0); }, 0);\n    };\n    Row.prototype.hasRowSpan = function (columns) {\n        var _this = this;\n        return (columns.filter(function (column) {\n            var cell = _this.cells[column.index];\n            if (!cell)\n                return false;\n            return cell.rowSpan > 1;\n        }).length > 0);\n    };\n    Row.prototype.canEntireRowFit = function (height, columns) {\n        return this.getMaxCellHeight(columns) <= height;\n    };\n    Row.prototype.getMinimumRowHeight = function (columns, doc) {\n        var _this = this;\n        return columns.reduce(function (acc, column) {\n            var cell = _this.cells[column.index];\n            if (!cell)\n                return 0;\n            var fontHeight = (cell.styles.fontSize / doc.scaleFactor()) * FONT_ROW_RATIO;\n            var vPadding = cell.padding('vertical');\n            var oneRowHeight = vPadding + fontHeight;\n            return oneRowHeight > acc ? oneRowHeight : acc;\n        }, 0);\n    };\n    return Row;\n}());\nvar Cell = /** @class */ (function () {\n    function Cell(raw, styles, section) {\n        var _a, _b;\n        this.contentHeight = 0;\n        this.contentWidth = 0;\n        this.wrappedWidth = 0;\n        this.minReadableWidth = 0;\n        this.minWidth = 0;\n        this.width = 0;\n        this.height = 0;\n        this.x = 0;\n        this.y = 0;\n        this.styles = styles;\n        this.section = section;\n        this.raw = raw;\n        var content = raw;\n        if (raw != null && typeof raw === 'object' && !Array.isArray(raw)) {\n            this.rowSpan = raw.rowSpan || 1;\n            this.colSpan = raw.colSpan || 1;\n            content = (_b = (_a = raw.content) !== null && _a !== void 0 ? _a : raw.title) !== null && _b !== void 0 ? _b : raw;\n            if (raw._element) {\n                this.raw = raw._element;\n            }\n        }\n        else {\n            this.rowSpan = 1;\n            this.colSpan = 1;\n        }\n        // Stringify 0 and false, but not undefined or null\n        var text = content != null ? '' + content : '';\n        var splitRegex = /\\r\\n|\\r|\\n/g;\n        this.text = text.split(splitRegex);\n    }\n    Cell.prototype.getTextPos = function () {\n        var y;\n        if (this.styles.valign === 'top') {\n            y = this.y + this.padding('top');\n        }\n        else if (this.styles.valign === 'bottom') {\n            y = this.y + this.height - this.padding('bottom');\n        }\n        else {\n            var netHeight = this.height - this.padding('vertical');\n            y = this.y + netHeight / 2 + this.padding('top');\n        }\n        var x;\n        if (this.styles.halign === 'right') {\n            x = this.x + this.width - this.padding('right');\n        }\n        else if (this.styles.halign === 'center') {\n            var netWidth = this.width - this.padding('horizontal');\n            x = this.x + netWidth / 2 + this.padding('left');\n        }\n        else {\n            x = this.x + this.padding('left');\n        }\n        return { x: x, y: y };\n    };\n    Cell.prototype.getContentHeight = function (scaleFactor) {\n        var lineCount = Array.isArray(this.text) ? this.text.length : 1;\n        var fontHeight = (this.styles.fontSize / scaleFactor) * FONT_ROW_RATIO;\n        var height = lineCount * fontHeight + this.padding('vertical');\n        return Math.max(height, this.styles.minCellHeight);\n    };\n    Cell.prototype.padding = function (name) {\n        var padding = parseSpacing(this.styles.cellPadding, 0);\n        if (name === 'vertical') {\n            return padding.top + padding.bottom;\n        }\n        else if (name === 'horizontal') {\n            return padding.left + padding.right;\n        }\n        else {\n            return padding[name];\n        }\n    };\n    return Cell;\n}());\nvar Column = /** @class */ (function () {\n    function Column(dataKey, raw, index) {\n        this.wrappedWidth = 0;\n        this.minReadableWidth = 0;\n        this.minWidth = 0;\n        this.width = 0;\n        this.dataKey = dataKey;\n        this.raw = raw;\n        this.index = index;\n    }\n    Column.prototype.getMaxCustomCellWidth = function (table) {\n        var max = 0;\n        for (var _i = 0, _a = table.allRows(); _i < _a.length; _i++) {\n            var row = _a[_i];\n            var cell = row.cells[this.index];\n            if (cell && typeof cell.styles.cellWidth === 'number') {\n                max = Math.max(max, cell.styles.cellWidth);\n            }\n        }\n        return max;\n    };\n    return Column;\n}());\n\nvar getPageAvailableWidth = function (doc, table) {\n    var margins = parseSpacing(table.settings.margin, 0);\n    var availablePageWidth = doc.pageSize().width - (margins.left + margins.right);\n    return availablePageWidth;\n};\n// get columns can be fit into page\nvar getColumnsCanFitInPage = function (doc, table, config) {\n    if (config === void 0) { config = {}; }\n    // get page width\n    var availablePageWidth = getPageAvailableWidth(doc, table);\n    var remainingWidth = availablePageWidth;\n    // get column data key to repeat\n    var horizontalPageBreakRepeat = table.settings.horizontalPageBreakRepeat;\n    var repeatColumn = null;\n    var cols = [];\n    var columns = [];\n    var len = table.columns.length;\n    var i = config && config.start ? config.start : 0;\n    // code to repeat the given column in split pages\n    if (horizontalPageBreakRepeat != null) {\n        repeatColumn = table.columns.find(function (item) {\n            return item.dataKey === horizontalPageBreakRepeat ||\n                item.index === horizontalPageBreakRepeat;\n        });\n        if (repeatColumn) {\n            cols.push(repeatColumn.index);\n            columns.push(table.columns[repeatColumn.index]);\n            remainingWidth = remainingWidth - repeatColumn.wrappedWidth;\n        }\n    }\n    while (i < len) {\n        if ((repeatColumn === null || repeatColumn === void 0 ? void 0 : repeatColumn.index) === i) {\n            i++; // prevent columnDataKeyToRepeat to be pushed twice in a page\n            continue;\n        }\n        var colWidth = table.columns[i].wrappedWidth;\n        if (remainingWidth < colWidth) {\n            // check if it's first column in the sequence then add it into result\n            if (i === 0 || i === config.start) {\n                // this cell width is more than page width set it available pagewidth\n                /* table.columns[i].wrappedWidth = availablePageWidth\n                table.columns[i].minWidth = availablePageWidth */\n                cols.push(i);\n                columns.push(table.columns[i]);\n            }\n            // can't print more columns in same page\n            break;\n        }\n        cols.push(i);\n        columns.push(table.columns[i]);\n        remainingWidth = remainingWidth - colWidth;\n        i++;\n    }\n    return { colIndexes: cols, columns: columns, lastIndex: i };\n};\nvar calculateAllColumnsCanFitInPage = function (doc, table) {\n    // const margins = table.settings.margin;\n    // const availablePageWidth = doc.pageSize().width - (margins.left + margins.right);\n    var allResults = [];\n    var index = 0;\n    var len = table.columns.length;\n    while (index < len) {\n        var result = getColumnsCanFitInPage(doc, table, {\n            start: index === 0 ? 0 : index,\n        });\n        if (result && result.columns && result.columns.length) {\n            index = result.lastIndex;\n            allResults.push(result);\n        }\n        else {\n            index++;\n        }\n    }\n    return allResults;\n};\nvar TablePrinter = {\n    getColumnsCanFitInPage: getColumnsCanFitInPage,\n    calculateAllColumnsCanFitInPage: calculateAllColumnsCanFitInPage,\n    getPageAvailableWidth: getPageAvailableWidth,\n};\n\nfunction drawTable(jsPDFDoc, table) {\n    var settings = table.settings;\n    var startY = settings.startY;\n    var margin = settings.margin;\n    var cursor = {\n        x: margin.left,\n        y: startY,\n    };\n    var sectionsHeight = table.getHeadHeight(table.columns) + table.getFootHeight(table.columns);\n    var minTableBottomPos = startY + margin.bottom + sectionsHeight;\n    if (settings.pageBreak === 'avoid') {\n        var rows = table.allRows();\n        var tableHeight = rows.reduce(function (acc, row) { return acc + row.height; }, 0);\n        minTableBottomPos += tableHeight;\n    }\n    var doc = new DocHandler(jsPDFDoc);\n    if (settings.pageBreak === 'always' ||\n        (settings.startY != null && minTableBottomPos > doc.pageSize().height)) {\n        nextPage(doc);\n        cursor.y = margin.top;\n    }\n    var startPos = assign({}, cursor);\n    table.startPageNumber = doc.pageNumber();\n    if (settings.horizontalPageBreak === true) {\n        // managed flow for split columns\n        printTableWithHorizontalPageBreak(doc, table, startPos, cursor);\n    }\n    else {\n        // normal flow\n        doc.applyStyles(doc.userStyles);\n        if (settings.showHead === 'firstPage' ||\n            settings.showHead === 'everyPage') {\n            table.head.forEach(function (row) {\n                return printRow(doc, table, row, cursor, table.columns);\n            });\n        }\n        doc.applyStyles(doc.userStyles);\n        table.body.forEach(function (row, index) {\n            var isLastRow = index === table.body.length - 1;\n            printFullRow(doc, table, row, isLastRow, startPos, cursor, table.columns);\n        });\n        doc.applyStyles(doc.userStyles);\n        if (settings.showFoot === 'lastPage' || settings.showFoot === 'everyPage') {\n            table.foot.forEach(function (row) {\n                return printRow(doc, table, row, cursor, table.columns);\n            });\n        }\n    }\n    addTableBorder(doc, table, startPos, cursor);\n    table.callEndPageHooks(doc, cursor);\n    table.finalY = cursor.y;\n    jsPDFDoc.lastAutoTable = table;\n    jsPDFDoc.previousAutoTable = table; // Deprecated\n    if (jsPDFDoc.autoTable)\n        jsPDFDoc.autoTable.previous = table; // Deprecated\n    doc.applyStyles(doc.userStyles);\n}\nfunction printTableWithHorizontalPageBreak(doc, table, startPos, cursor) {\n    // calculate width of columns and render only those which can fit into page\n    var allColumnsCanFitResult = TablePrinter.calculateAllColumnsCanFitInPage(doc, table);\n    allColumnsCanFitResult.map(function (colsAndIndexes, index) {\n        doc.applyStyles(doc.userStyles);\n        // add page to print next columns in new page\n        if (index > 0) {\n            addPage(doc, table, startPos, cursor, colsAndIndexes.columns);\n        }\n        else {\n            // print head for selected columns\n            printHead(doc, table, cursor, colsAndIndexes.columns);\n        }\n        // print body for selected columns\n        printBody(doc, table, startPos, cursor, colsAndIndexes.columns);\n        // print foot for selected columns\n        printFoot(doc, table, cursor, colsAndIndexes.columns);\n    });\n}\nfunction printHead(doc, table, cursor, columns) {\n    var settings = table.settings;\n    doc.applyStyles(doc.userStyles);\n    if (settings.showHead === 'firstPage' || settings.showHead === 'everyPage') {\n        table.head.forEach(function (row) { return printRow(doc, table, row, cursor, columns); });\n    }\n}\nfunction printBody(doc, table, startPos, cursor, columns) {\n    doc.applyStyles(doc.userStyles);\n    table.body.forEach(function (row, index) {\n        var isLastRow = index === table.body.length - 1;\n        printFullRow(doc, table, row, isLastRow, startPos, cursor, columns);\n    });\n}\nfunction printFoot(doc, table, cursor, columns) {\n    var settings = table.settings;\n    doc.applyStyles(doc.userStyles);\n    if (settings.showFoot === 'lastPage' || settings.showFoot === 'everyPage') {\n        table.foot.forEach(function (row) { return printRow(doc, table, row, cursor, columns); });\n    }\n}\nfunction getRemainingLineCount(cell, remainingPageSpace, doc) {\n    var fontHeight = (cell.styles.fontSize / doc.scaleFactor()) * FONT_ROW_RATIO;\n    var vPadding = cell.padding('vertical');\n    var remainingLines = Math.floor((remainingPageSpace - vPadding) / fontHeight);\n    return Math.max(0, remainingLines);\n}\nfunction modifyRowToFit(row, remainingPageSpace, table, doc) {\n    var cells = {};\n    row.spansMultiplePages = true;\n    row.height = 0;\n    var rowHeight = 0;\n    for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n        var cell = row.cells[column.index];\n        if (!cell)\n            continue;\n        if (!Array.isArray(cell.text)) {\n            cell.text = [cell.text];\n        }\n        var remainderCell = new Cell(cell.raw, cell.styles, cell.section);\n        remainderCell = assign(remainderCell, cell);\n        remainderCell.text = [];\n        var remainingLineCount = getRemainingLineCount(cell, remainingPageSpace, doc);\n        if (cell.text.length > remainingLineCount) {\n            remainderCell.text = cell.text.splice(remainingLineCount, cell.text.length);\n        }\n        var scaleFactor = doc.scaleFactor();\n        cell.contentHeight = cell.getContentHeight(scaleFactor);\n        if (cell.contentHeight >= remainingPageSpace) {\n            cell.contentHeight = remainingPageSpace;\n            remainderCell.styles.minCellHeight -= remainingPageSpace;\n        }\n        if (cell.contentHeight > row.height) {\n            row.height = cell.contentHeight;\n        }\n        remainderCell.contentHeight = remainderCell.getContentHeight(scaleFactor);\n        if (remainderCell.contentHeight > rowHeight) {\n            rowHeight = remainderCell.contentHeight;\n        }\n        cells[column.index] = remainderCell;\n    }\n    var remainderRow = new Row(row.raw, -1, row.section, cells, true);\n    remainderRow.height = rowHeight;\n    for (var _b = 0, _c = table.columns; _b < _c.length; _b++) {\n        var column = _c[_b];\n        var remainderCell = remainderRow.cells[column.index];\n        if (remainderCell) {\n            remainderCell.height = remainderRow.height;\n        }\n        var cell = row.cells[column.index];\n        if (cell) {\n            cell.height = row.height;\n        }\n    }\n    return remainderRow;\n}\nfunction shouldPrintOnCurrentPage(doc, row, remainingPageSpace, table) {\n    var pageHeight = doc.pageSize().height;\n    var margin = table.settings.margin;\n    var marginHeight = margin.top + margin.bottom;\n    var maxRowHeight = pageHeight - marginHeight;\n    if (row.section === 'body') {\n        // Should also take into account that head and foot is not\n        // on every page with some settings\n        maxRowHeight -=\n            table.getHeadHeight(table.columns) + table.getFootHeight(table.columns);\n    }\n    var minRowHeight = row.getMinimumRowHeight(table.columns, doc);\n    var minRowFits = minRowHeight < remainingPageSpace;\n    if (minRowHeight > maxRowHeight) {\n        console.error(\"Will not be able to print row \".concat(row.index, \" correctly since it's minimum height is larger than page height\"));\n        return true;\n    }\n    if (!minRowFits) {\n        return false;\n    }\n    var rowHasRowSpanCell = row.hasRowSpan(table.columns);\n    var rowHigherThanPage = row.getMaxCellHeight(table.columns) > maxRowHeight;\n    if (rowHigherThanPage) {\n        if (rowHasRowSpanCell) {\n            console.error(\"The content of row \".concat(row.index, \" will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.\"));\n        }\n        return true;\n    }\n    if (rowHasRowSpanCell) {\n        // Currently a new page is required whenever a rowspan row don't fit a page.\n        return false;\n    }\n    if (table.settings.rowPageBreak === 'avoid') {\n        return false;\n    }\n    // In all other cases print the row on current page\n    return true;\n}\nfunction printFullRow(doc, table, row, isLastRow, startPos, cursor, columns) {\n    var remainingSpace = getRemainingPageSpace(doc, table, isLastRow, cursor);\n    if (row.canEntireRowFit(remainingSpace, columns)) {\n        printRow(doc, table, row, cursor, columns);\n    }\n    else {\n        if (shouldPrintOnCurrentPage(doc, row, remainingSpace, table)) {\n            var remainderRow = modifyRowToFit(row, remainingSpace, table, doc);\n            printRow(doc, table, row, cursor, columns);\n            addPage(doc, table, startPos, cursor, columns);\n            printFullRow(doc, table, remainderRow, isLastRow, startPos, cursor, columns);\n        }\n        else {\n            addPage(doc, table, startPos, cursor, columns);\n            printFullRow(doc, table, row, isLastRow, startPos, cursor, columns);\n        }\n    }\n}\nfunction printRow(doc, table, row, cursor, columns) {\n    cursor.x = table.settings.margin.left;\n    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n        var column = columns_1[_i];\n        var cell = row.cells[column.index];\n        if (!cell) {\n            cursor.x += column.width;\n            continue;\n        }\n        doc.applyStyles(cell.styles);\n        cell.x = cursor.x;\n        cell.y = cursor.y;\n        var result = table.callCellHooks(doc, table.hooks.willDrawCell, cell, row, column, cursor);\n        if (result === false) {\n            cursor.x += column.width;\n            continue;\n        }\n        drawCellBorders(doc, cell, cursor);\n        var textPos = cell.getTextPos();\n        autoTableText(cell.text, textPos.x, textPos.y, {\n            halign: cell.styles.halign,\n            valign: cell.styles.valign,\n            maxWidth: Math.ceil(cell.width - cell.padding('left') - cell.padding('right')),\n        }, doc.getDocument());\n        table.callCellHooks(doc, table.hooks.didDrawCell, cell, row, column, cursor);\n        cursor.x += column.width;\n    }\n    cursor.y += row.height;\n}\nfunction drawCellBorders(doc, cell, cursor) {\n    var cellStyles = cell.styles;\n    doc.getDocument().setFillColor(doc.getDocument().getFillColor());\n    if (typeof cellStyles.lineWidth === 'number') {\n        // prints normal cell border\n        var fillStyle = getFillStyle(cellStyles.lineWidth, cellStyles.fillColor);\n        if (fillStyle) {\n            doc.rect(cell.x, cursor.y, cell.width, cell.height, fillStyle);\n        }\n    }\n    else if (typeof cellStyles.lineWidth === 'object') {\n        doc.rect(cell.x, cursor.y, cell.width, cell.height, 'F');\n        var sides = Object.keys(cellStyles.lineWidth);\n        var lineWidth_1 = cellStyles.lineWidth;\n        sides.map(function (side) {\n            var fillStyle = getFillStyle(lineWidth_1[side], cellStyles.fillColor);\n            drawBorderForSide(doc, cell, cursor, side, fillStyle || 'S', lineWidth_1[side]);\n        });\n    }\n}\nfunction drawBorderForSide(doc, cell, cursor, side, fillStyle, lineWidth) {\n    var x1, y1, x2, y2;\n    switch (side) {\n        case 'top':\n            x1 = cursor.x;\n            y1 = cursor.y;\n            x2 = cursor.x + cell.width;\n            y2 = cursor.y;\n            break;\n        case 'left':\n            x1 = cursor.x;\n            y1 = cursor.y;\n            x2 = cursor.x;\n            y2 = cursor.y + cell.height;\n            break;\n        case 'right':\n            x1 = cursor.x + cell.width;\n            y1 = cursor.y;\n            x2 = cursor.x + cell.width;\n            y2 = cursor.y + cell.height;\n            break;\n        default:\n            // default it will print bottom\n            x1 = cursor.x;\n            y1 = cursor.y + cell.height - lineWidth;\n            x2 = cursor.x + cell.width;\n            y2 = cursor.y + cell.height - lineWidth;\n            break;\n    }\n    doc.getDocument().setLineWidth(lineWidth);\n    doc.getDocument().line(x1, y1, x2, y2, fillStyle);\n}\nfunction getRemainingPageSpace(doc, table, isLastRow, cursor) {\n    var bottomContentHeight = table.settings.margin.bottom;\n    var showFoot = table.settings.showFoot;\n    if (showFoot === 'everyPage' || (showFoot === 'lastPage' && isLastRow)) {\n        bottomContentHeight += table.getFootHeight(table.columns);\n    }\n    return doc.pageSize().height - cursor.y - bottomContentHeight;\n}\nfunction addPage(doc, table, startPos, cursor, columns) {\n    if (columns === void 0) { columns = []; }\n    doc.applyStyles(doc.userStyles);\n    if (table.settings.showFoot === 'everyPage') {\n        table.foot.forEach(function (row) { return printRow(doc, table, row, cursor, columns); });\n    }\n    // Add user content just before adding new page ensure it will\n    // be drawn above other things on the page\n    table.callEndPageHooks(doc, cursor);\n    var margin = table.settings.margin;\n    addTableBorder(doc, table, startPos, cursor);\n    nextPage(doc);\n    table.pageNumber++;\n    table.pageCount++;\n    cursor.x = margin.left;\n    cursor.y = margin.top;\n    startPos.y = margin.top;\n    if (table.settings.showHead === 'everyPage') {\n        table.head.forEach(function (row) { return printRow(doc, table, row, cursor, columns); });\n    }\n}\nfunction nextPage(doc) {\n    var current = doc.pageNumber();\n    doc.setPage(current + 1);\n    var newCurrent = doc.pageNumber();\n    if (newCurrent === current) {\n        doc.addPage();\n    }\n}\n\n/**\n * Calculate the column widths\n */\nfunction calculateWidths(doc, table) {\n    calculate(doc, table);\n    var resizableColumns = [];\n    var initialTableWidth = 0;\n    table.columns.forEach(function (column) {\n        var customWidth = column.getMaxCustomCellWidth(table);\n        if (customWidth) {\n            // final column width\n            column.width = customWidth;\n        }\n        else {\n            // initial column width (will be resized)\n            column.width = column.wrappedWidth;\n            resizableColumns.push(column);\n        }\n        initialTableWidth += column.width;\n    });\n    // width difference that needs to be distributed\n    var resizeWidth = table.getWidth(doc.pageSize().width) - initialTableWidth;\n    // first resize attempt: with respect to minReadableWidth and minWidth\n    if (resizeWidth) {\n        resizeWidth = resizeColumns(resizableColumns, resizeWidth, function (column) {\n            return Math.max(column.minReadableWidth, column.minWidth);\n        });\n    }\n    // second resize attempt: ignore minReadableWidth but respect minWidth\n    if (resizeWidth) {\n        resizeWidth = resizeColumns(resizableColumns, resizeWidth, function (column) { return column.minWidth; });\n    }\n    resizeWidth = Math.abs(resizeWidth);\n    if (!table.settings.horizontalPageBreak &&\n        resizeWidth > 0.1 / doc.scaleFactor()) {\n        // Table can't get smaller due to custom-width or minWidth restrictions\n        // We can't really do much here. Up to user to for example\n        // reduce font size, increase page size or remove custom cell widths\n        // to allow more columns to be reduced in size\n        resizeWidth = resizeWidth < 1 ? resizeWidth : Math.round(resizeWidth);\n        console.error(\"Of the table content, \".concat(resizeWidth, \" units width could not fit page\"));\n    }\n    applyColSpans(table);\n    fitContent(table, doc);\n    applyRowSpans(table);\n}\nfunction calculate(doc, table) {\n    var sf = doc.scaleFactor();\n    var horizontalPageBreak = table.settings.horizontalPageBreak;\n    var availablePageWidth = TablePrinter.getPageAvailableWidth(doc, table);\n    table.allRows().forEach(function (row) {\n        for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            var cell = row.cells[column.index];\n            if (!cell)\n                continue;\n            var hooks = table.hooks.didParseCell;\n            table.callCellHooks(doc, hooks, cell, row, column, null);\n            var padding = cell.padding('horizontal');\n            cell.contentWidth = getStringWidth(cell.text, cell.styles, doc) + padding;\n            var longestWordWidth = getStringWidth(cell.text.join(' ').split(/\\s+/), cell.styles, doc);\n            cell.minReadableWidth = longestWordWidth + cell.padding('horizontal');\n            if (typeof cell.styles.cellWidth === 'number') {\n                cell.minWidth = cell.styles.cellWidth;\n                cell.wrappedWidth = cell.styles.cellWidth;\n            }\n            else if (cell.styles.cellWidth === 'wrap' ||\n                horizontalPageBreak === true) {\n                // cell width should not be more than available page width\n                if (cell.contentWidth > availablePageWidth) {\n                    cell.minWidth = availablePageWidth;\n                    cell.wrappedWidth = availablePageWidth;\n                }\n                else {\n                    cell.minWidth = cell.contentWidth;\n                    cell.wrappedWidth = cell.contentWidth;\n                }\n            }\n            else {\n                // auto\n                var defaultMinWidth = 10 / sf;\n                cell.minWidth = cell.styles.minCellWidth || defaultMinWidth;\n                cell.wrappedWidth = cell.contentWidth;\n                if (cell.minWidth > cell.wrappedWidth) {\n                    cell.wrappedWidth = cell.minWidth;\n                }\n            }\n        }\n    });\n    table.allRows().forEach(function (row) {\n        for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            var cell = row.cells[column.index];\n            // For now we ignore the minWidth and wrappedWidth of colspan cells when calculating colspan widths.\n            // Could probably be improved upon however.\n            if (cell && cell.colSpan === 1) {\n                column.wrappedWidth = Math.max(column.wrappedWidth, cell.wrappedWidth);\n                column.minWidth = Math.max(column.minWidth, cell.minWidth);\n                column.minReadableWidth = Math.max(column.minReadableWidth, cell.minReadableWidth);\n            }\n            else {\n                // Respect cellWidth set in columnStyles even if there is no cells for this column\n                // or if the column only have colspan cells. Since the width of colspan cells\n                // does not affect the width of columns, setting columnStyles cellWidth enables the\n                // user to at least do it manually.\n                // Note that this is not perfect for now since for example row and table styles are\n                // not accounted for\n                var columnStyles = table.styles.columnStyles[column.dataKey] ||\n                    table.styles.columnStyles[column.index] ||\n                    {};\n                var cellWidth = columnStyles.cellWidth || columnStyles.minCellWidth;\n                if (cellWidth && typeof cellWidth === 'number') {\n                    column.minWidth = cellWidth;\n                    column.wrappedWidth = cellWidth;\n                }\n            }\n            if (cell) {\n                // Make sure all columns get at least min width even though width calculations are not based on them\n                if (cell.colSpan > 1 && !column.minWidth) {\n                    column.minWidth = cell.minWidth;\n                }\n                if (cell.colSpan > 1 && !column.wrappedWidth) {\n                    column.wrappedWidth = cell.minWidth;\n                }\n            }\n        }\n    });\n}\n/**\n * Distribute resizeWidth on passed resizable columns\n */\nfunction resizeColumns(columns, resizeWidth, getMinWidth) {\n    var initialResizeWidth = resizeWidth;\n    var sumWrappedWidth = columns.reduce(function (acc, column) { return acc + column.wrappedWidth; }, 0);\n    for (var i = 0; i < columns.length; i++) {\n        var column = columns[i];\n        var ratio = column.wrappedWidth / sumWrappedWidth;\n        var suggestedChange = initialResizeWidth * ratio;\n        var suggestedWidth = column.width + suggestedChange;\n        var minWidth = getMinWidth(column);\n        var newWidth = suggestedWidth < minWidth ? minWidth : suggestedWidth;\n        resizeWidth -= newWidth - column.width;\n        column.width = newWidth;\n    }\n    resizeWidth = Math.round(resizeWidth * 1e10) / 1e10;\n    // Run the resizer again if there's remaining width needs\n    // to be distributed and there're columns that can be resized\n    if (resizeWidth) {\n        var resizableColumns = columns.filter(function (column) {\n            return resizeWidth < 0\n                ? column.width > getMinWidth(column) // check if column can shrink\n                : true; // check if column can grow\n        });\n        if (resizableColumns.length) {\n            resizeWidth = resizeColumns(resizableColumns, resizeWidth, getMinWidth);\n        }\n    }\n    return resizeWidth;\n}\nfunction applyRowSpans(table) {\n    var rowSpanCells = {};\n    var colRowSpansLeft = 1;\n    var all = table.allRows();\n    for (var rowIndex = 0; rowIndex < all.length; rowIndex++) {\n        var row = all[rowIndex];\n        for (var _i = 0, _a = table.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            var data = rowSpanCells[column.index];\n            if (colRowSpansLeft > 1) {\n                colRowSpansLeft--;\n                delete row.cells[column.index];\n            }\n            else if (data) {\n                data.cell.height += row.height;\n                colRowSpansLeft = data.cell.colSpan;\n                delete row.cells[column.index];\n                data.left--;\n                if (data.left <= 1) {\n                    delete rowSpanCells[column.index];\n                }\n            }\n            else {\n                var cell = row.cells[column.index];\n                if (!cell) {\n                    continue;\n                }\n                cell.height = row.height;\n                if (cell.rowSpan > 1) {\n                    var remaining = all.length - rowIndex;\n                    var left = cell.rowSpan > remaining ? remaining : cell.rowSpan;\n                    rowSpanCells[column.index] = { cell: cell, left: left, row: row };\n                }\n            }\n        }\n    }\n}\nfunction applyColSpans(table) {\n    var all = table.allRows();\n    for (var rowIndex = 0; rowIndex < all.length; rowIndex++) {\n        var row = all[rowIndex];\n        var colSpanCell = null;\n        var combinedColSpanWidth = 0;\n        var colSpansLeft = 0;\n        for (var columnIndex = 0; columnIndex < table.columns.length; columnIndex++) {\n            var column = table.columns[columnIndex];\n            // Width and colspan\n            colSpansLeft -= 1;\n            if (colSpansLeft > 1 && table.columns[columnIndex + 1]) {\n                combinedColSpanWidth += column.width;\n                delete row.cells[column.index];\n            }\n            else if (colSpanCell) {\n                var cell = colSpanCell;\n                delete row.cells[column.index];\n                colSpanCell = null;\n                cell.width = column.width + combinedColSpanWidth;\n            }\n            else {\n                var cell = row.cells[column.index];\n                if (!cell)\n                    continue;\n                colSpansLeft = cell.colSpan;\n                combinedColSpanWidth = 0;\n                if (cell.colSpan > 1) {\n                    colSpanCell = cell;\n                    combinedColSpanWidth += column.width;\n                    continue;\n                }\n                cell.width = column.width + combinedColSpanWidth;\n            }\n        }\n    }\n}\nfunction fitContent(table, doc) {\n    var rowSpanHeight = { count: 0, height: 0 };\n    for (var _i = 0, _a = table.allRows(); _i < _a.length; _i++) {\n        var row = _a[_i];\n        for (var _b = 0, _c = table.columns; _b < _c.length; _b++) {\n            var column = _c[_b];\n            var cell = row.cells[column.index];\n            if (!cell)\n                continue;\n            doc.applyStyles(cell.styles, true);\n            var textSpace = cell.width - cell.padding('horizontal');\n            if (cell.styles.overflow === 'linebreak') {\n                // Add one pt to textSpace to fix rounding error\n                cell.text = doc.splitTextToSize(cell.text, textSpace + 1 / doc.scaleFactor(), { fontSize: cell.styles.fontSize });\n            }\n            else if (cell.styles.overflow === 'ellipsize') {\n                cell.text = ellipsize(cell.text, textSpace, cell.styles, doc, '...');\n            }\n            else if (cell.styles.overflow === 'hidden') {\n                cell.text = ellipsize(cell.text, textSpace, cell.styles, doc, '');\n            }\n            else if (typeof cell.styles.overflow === 'function') {\n                var result = cell.styles.overflow(cell.text, textSpace);\n                if (typeof result === 'string') {\n                    cell.text = [result];\n                }\n                else {\n                    cell.text = result;\n                }\n            }\n            cell.contentHeight = cell.getContentHeight(doc.scaleFactor());\n            var realContentHeight = cell.contentHeight / cell.rowSpan;\n            if (cell.rowSpan > 1 &&\n                rowSpanHeight.count * rowSpanHeight.height <\n                    realContentHeight * cell.rowSpan) {\n                rowSpanHeight = { height: realContentHeight, count: cell.rowSpan };\n            }\n            else if (rowSpanHeight && rowSpanHeight.count > 0) {\n                if (rowSpanHeight.height > realContentHeight) {\n                    realContentHeight = rowSpanHeight.height;\n                }\n            }\n            if (realContentHeight > row.height) {\n                row.height = realContentHeight;\n            }\n        }\n        rowSpanHeight.count--;\n    }\n}\nfunction ellipsize(text, width, styles, doc, overflow) {\n    return text.map(function (str) { return ellipsizeStr(str, width, styles, doc, overflow); });\n}\nfunction ellipsizeStr(text, width, styles, doc, overflow) {\n    var precision = 10000 * doc.scaleFactor();\n    width = Math.ceil(width * precision) / precision;\n    if (width >= getStringWidth(text, styles, doc)) {\n        return text;\n    }\n    while (width < getStringWidth(text + overflow, styles, doc)) {\n        if (text.length <= 1) {\n            break;\n        }\n        text = text.substring(0, text.length - 1);\n    }\n    return text.trim() + overflow;\n}\n\nfunction createTable(jsPDFDoc, input) {\n    var doc = new DocHandler(jsPDFDoc);\n    var content = parseContent(input, doc.scaleFactor());\n    var table = new Table(input, content);\n    calculateWidths(doc, table);\n    doc.applyStyles(doc.userStyles);\n    return table;\n}\nfunction parseContent(input, sf) {\n    var content = input.content;\n    var columns = createColumns(content.columns);\n    // If no head or foot is set, try generating it with content from columns\n    if (content.head.length === 0) {\n        var sectionRow = generateSectionRow(columns, 'head');\n        if (sectionRow)\n            content.head.push(sectionRow);\n    }\n    if (content.foot.length === 0) {\n        var sectionRow = generateSectionRow(columns, 'foot');\n        if (sectionRow)\n            content.foot.push(sectionRow);\n    }\n    var theme = input.settings.theme;\n    var styles = input.styles;\n    return {\n        columns: columns,\n        head: parseSection('head', content.head, columns, styles, theme, sf),\n        body: parseSection('body', content.body, columns, styles, theme, sf),\n        foot: parseSection('foot', content.foot, columns, styles, theme, sf),\n    };\n}\nfunction parseSection(sectionName, sectionRows, columns, styleProps, theme, scaleFactor) {\n    var rowSpansLeftForColumn = {};\n    var result = sectionRows.map(function (rawRow, rowIndex) {\n        var skippedRowForRowSpans = 0;\n        var cells = {};\n        var colSpansAdded = 0;\n        var columnSpansLeft = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (rowSpansLeftForColumn[column.index] == null ||\n                rowSpansLeftForColumn[column.index].left === 0) {\n                if (columnSpansLeft === 0) {\n                    var rawCell = void 0;\n                    if (Array.isArray(rawRow)) {\n                        rawCell =\n                            rawRow[column.index - colSpansAdded - skippedRowForRowSpans];\n                    }\n                    else {\n                        rawCell = rawRow[column.dataKey];\n                    }\n                    var cellInputStyles = {};\n                    if (typeof rawCell === 'object' && !Array.isArray(rawCell)) {\n                        cellInputStyles = (rawCell === null || rawCell === void 0 ? void 0 : rawCell.styles) || {};\n                    }\n                    var styles = cellStyles(sectionName, column, rowIndex, theme, styleProps, scaleFactor, cellInputStyles);\n                    var cell = new Cell(rawCell, styles, sectionName);\n                    // dataKey is not used internally no more but keep for\n                    // backwards compat in hooks\n                    cells[column.dataKey] = cell;\n                    cells[column.index] = cell;\n                    columnSpansLeft = cell.colSpan - 1;\n                    rowSpansLeftForColumn[column.index] = {\n                        left: cell.rowSpan - 1,\n                        times: columnSpansLeft,\n                    };\n                }\n                else {\n                    columnSpansLeft--;\n                    colSpansAdded++;\n                }\n            }\n            else {\n                rowSpansLeftForColumn[column.index].left--;\n                columnSpansLeft = rowSpansLeftForColumn[column.index].times;\n                skippedRowForRowSpans++;\n            }\n        }\n        return new Row(rawRow, rowIndex, sectionName, cells);\n    });\n    return result;\n}\nfunction generateSectionRow(columns, section) {\n    var sectionRow = {};\n    columns.forEach(function (col) {\n        if (col.raw != null) {\n            var title = getSectionTitle(section, col.raw);\n            if (title != null)\n                sectionRow[col.dataKey] = title;\n        }\n    });\n    return Object.keys(sectionRow).length > 0 ? sectionRow : null;\n}\nfunction getSectionTitle(section, column) {\n    if (section === 'head') {\n        if (typeof column === 'object') {\n            return column.header || column.title || null;\n        }\n        else if (typeof column === 'string' || typeof column === 'number') {\n            return column;\n        }\n    }\n    else if (section === 'foot' && typeof column === 'object') {\n        return column.footer;\n    }\n    return null;\n}\nfunction createColumns(columns) {\n    return columns.map(function (input, index) {\n        var _a, _b;\n        var key;\n        if (typeof input === 'object') {\n            key = (_b = (_a = input.dataKey) !== null && _a !== void 0 ? _a : input.key) !== null && _b !== void 0 ? _b : index;\n        }\n        else {\n            key = index;\n        }\n        return new Column(key, input, index);\n    });\n}\nfunction cellStyles(sectionName, column, rowIndex, themeName, styles, scaleFactor, cellInputStyles) {\n    var theme = getTheme(themeName);\n    var sectionStyles;\n    if (sectionName === 'head') {\n        sectionStyles = styles.headStyles;\n    }\n    else if (sectionName === 'body') {\n        sectionStyles = styles.bodyStyles;\n    }\n    else if (sectionName === 'foot') {\n        sectionStyles = styles.footStyles;\n    }\n    var otherStyles = assign({}, theme.table, theme[sectionName], styles.styles, sectionStyles);\n    var columnStyles = styles.columnStyles[column.dataKey] ||\n        styles.columnStyles[column.index] ||\n        {};\n    var colStyles = sectionName === 'body' ? columnStyles : {};\n    var rowStyles = sectionName === 'body' && rowIndex % 2 === 0\n        ? assign({}, theme.alternateRow, styles.alternateRowStyles)\n        : {};\n    var defaultStyle = defaultStyles(scaleFactor);\n    var themeStyles = assign({}, defaultStyle, otherStyles, rowStyles, colStyles);\n    return assign(themeStyles, cellInputStyles);\n}\n\nfunction _applyPlugin (jsPDF) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    jsPDF.API.autoTable = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var options;\n        if (args.length === 1) {\n            options = args[0];\n        }\n        else {\n            console.error('Use of deprecated autoTable initiation');\n            options = args[2] || {};\n            options.columns = args[0];\n            options.body = args[1];\n        }\n        var input = parseInput(this, options);\n        var table = createTable(this, input);\n        drawTable(this, table);\n        return this;\n    };\n    // Assign false to enable `doc.lastAutoTable.finalY || 40` sugar\n    jsPDF.API.lastAutoTable = false;\n    jsPDF.API.previousAutoTable = false; // deprecated in v3\n    jsPDF.API.autoTable.previous = false; // deprecated in v3\n    jsPDF.API.autoTableText = function (text, x, y, styles) {\n        autoTableText(text, x, y, styles, this);\n    };\n    jsPDF.API.autoTableSetDefaults = function (defaults) {\n        DocHandler.setDefaults(defaults, this);\n        return this;\n    };\n    jsPDF.autoTableSetDefaults = function (defaults, doc) {\n        DocHandler.setDefaults(defaults, doc);\n    };\n    jsPDF.API.autoTableHtmlToJson = function (tableElem, includeHiddenElements) {\n        if (includeHiddenElements === void 0) { includeHiddenElements = false; }\n        if (typeof window === 'undefined') {\n            console.error('Cannot run autoTableHtmlToJson in non browser environment');\n            return null;\n        }\n        var doc = new DocHandler(this);\n        var _a = parseHtml(doc, tableElem, window, includeHiddenElements, false), head = _a.head, body = _a.body;\n        var columns = head[0].map(function (c) { return c.content; });\n        return { columns: columns, rows: body, data: body };\n    };\n    /**\n     * @deprecated\n     */\n    jsPDF.API.autoTableEndPosY = function () {\n        console.error('Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.');\n        var prev = this.lastAutoTable;\n        if (prev && prev.finalY) {\n            return prev.finalY;\n        }\n        else {\n            return 0;\n        }\n    };\n    /**\n     * @deprecated\n     */\n    jsPDF.API.autoTableAddPageContent = function (hook) {\n        console.error('Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead.');\n        if (!jsPDF.API.autoTable.globalDefaults) {\n            jsPDF.API.autoTable.globalDefaults = {};\n        }\n        jsPDF.API.autoTable.globalDefaults.addPageContent = hook;\n        return this;\n    };\n    /**\n     * @deprecated\n     */\n    jsPDF.API.autoTableAddPage = function () {\n        console.error('Use of deprecated function: autoTableAddPage. Use doc.addPage()');\n        this.addPage();\n        return this;\n    };\n}\n\n// export { applyPlugin } didn't export applyPlugin\n// to index.d.ts for some reason\nfunction applyPlugin(jsPDF) {\n    _applyPlugin(jsPDF);\n}\nfunction autoTable(d, options) {\n    var input = parseInput(d, options);\n    var table = createTable(d, input);\n    drawTable(d, table);\n}\n// Experimental export\nfunction __createTable(d, options) {\n    var input = parseInput(d, options);\n    return createTable(d, input);\n}\nfunction __drawTable(d, table) {\n    drawTable(d, table);\n}\ntry {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    var jsPDF = require('jspdf');\n    // Webpack imported jspdf instead of jsPDF for some reason\n    // while it seemed to work everywhere else.\n    if (jsPDF.jsPDF)\n        jsPDF = jsPDF.jsPDF;\n    applyPlugin(jsPDF);\n}\ncatch (error) {\n    // Importing jspdf in nodejs environments does not work as of jspdf\n    // 1.5.3 so we need to silence potential errors to support using for example\n    // the nodejs jspdf dist files with the exported applyPlugin\n}\n\nexport { Cell, CellHookData, Column, Row, Table, __createTable, __drawTable, applyPlugin, autoTable as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}